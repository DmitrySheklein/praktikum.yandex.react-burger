{"version":3,"sources":["pages/profile/profile-form.module.css","pages/feed/feed.module.css","components/order-modal-info/order-info.module.css","components/burger-ingredients/burger-ingredients.module.css","components/burger-constructor/burger-constructor.module.css","components/app-header/app-header.tsx","types/hooks.ts","services/constructor/constants.ts","services/constructor/selectors.ts","components/burger-ingredients/burger-ingredient.tsx","services/ingredients/constants.ts","services/ingredients/selectors.ts","components/preloader/preloader.tsx","components/burger-ingredients/burger-ingredients.tsx","components/modal/modal-overlay.tsx","components/modal/modal.tsx","images/done.png","services/order/constants.ts","services/order/selectors.ts","components/order-details/order-details.tsx","components/burger-constructor/empty-contstructor-element.tsx","services/constructor/action-type.ts","components/burger-constructor/contstructor-element.tsx","utils/constants.ts","utils/cookie.ts","services/order/actions.ts","services/auth/constants.ts","services/auth/selectors.ts","components/burger-constructor/burger-constructor.tsx","services/order/action-type.ts","services/ingredients/action-types.ts","utils/auth-api.ts","services/auth/action-type.ts","services/auth/actions.ts","pages/login-page.tsx","pages/register-page.tsx","pages/forgot-password-page.tsx","pages/reset-password-page.tsx","pages/profile/profile-sidebar.tsx","services/user/constants.ts","services/user/selectors.ts","services/user/actions-type.ts","pages/profile/profile-edit.tsx","types/data.ts","services/user/actions.ts","services/websoket/constants.ts","services/websoket/selectors.ts","utils/getTotalSum.ts","utils/formatStatusOrder.ts","utils/formateDate.ts","components/order-list/order-list.tsx","pages/profile/profile-orders.tsx","components/order-modal-info/order-modal-info.tsx","pages/profile/profile-page.tsx","pages/404-page.tsx","pages/feed/feed-page.tsx","components/protected-route.tsx","components/ingredient-details/ingredient-details.tsx","components/auth-protected-route.tsx","components/app/app.tsx","services/websoket/socketMiddleware.ts","services/ingredients/actions.ts","reportWebVitals.ts","services/ingredients/reducer.ts","services/constructor/reducer.ts","services/order/reducer.ts","services/auth/reducer.ts","services/user/reducer.ts","services/websoket/reducer.ts","services/rootReducer.ts","services/websoket/action-type.ts","services/store.ts","index.tsx","pages/profile/profile-sidebar.module.css","components/app-header/app-header.module.css","components/order-list/order-list.module.css","components/modal/modal.module.css","components/ingredient-details/ingredient-details.module.css","pages/page.module.css","pages/profile/profile.module.css","components/app/app.module.css","components/preloader/preloader.module.css","components/order-details/order.module.css"],"names":["module","exports","AppHeader","className","styles","header","headerContainer","headerMenu","to","exact","headerLink","activeClassName","active","type","logoWrap","useSelector","selectorHook","useDispatch","dispatchHook","ADD_BUN","ADD_INGREDIENT","REMOVE_INGREDIENT","RESET_CONSTRUCTOR","UPDATE_CONSTRUCTOR","getConstructorItems","store","BurgerIngredient","product","location","useLocation","orderState","getCurrentCount","useMemo","bun","ingredients","reduce","acc","current","_id","useDrag","item","collect","monitor","isDrag","isDragging","dragRef","ListItem","ref","ListItemLink","pathname","state","background","count","size","ListImgWrap","src","image_large","alt","name","ListItemPriceWrap","ListItemPrice","price","ListItemName","LOAD_ITEMS","LOAD_ITEMS_SUCCESS","LOAD_ITEMS_FAILED","getIngredients","ingredientsIsLoading","ingredientsRequest","Preloader","preloader","pulse","BurgerIngredients","loadingIngredients","productsData","useState","currentTab","setCurrentTab","categoryType","Array","from","Set","map","setTab","tab","element","document","getElementById","scrollIntoView","behavior","inViewOptions","threshold","trackVisibility","delay","useInView","bunRef","inViewBun","mainRef","inViewMain","sauceRef","inViewSauce","categoryTypeMap","sauce","main","useEffect","mainBlock","tabs","Object","entries","category","value","onClick","categoryBlock","length","categoryBlockItem","id","List","filter","ModalOverlay","clickHandler","modalOverlay","modalRoot","Modal","children","headerTitle","visible","setFunc","withHeader","handleEscClose","evt","key","addEventListener","removeEventListener","ReactDOM","createPortal","modal","show","modalBody","stopPropagation","title","modalCloseBtn","modalHeader","modalContent","CREATE_ORDER_REQUEST","CREATE_ORDER_SUCCESS","CREATE_ORDER_FAILED","getOrder","orderInfo","order","isOrderRequest","orderRequest","OrderDetails","number","done","EmptyConstructorElement","position","style","constructorListItem","noBuns","addBunAction","addIngredientAction","ingredient","ConstructorSubElement","index","ingredientsLength","dispatch","useRef","useDrop","accept","handlerId","getHandlerId","hover","dragIndex","hoverIndex","hoverBoundingRect","getBoundingClientRect","hoverMiddleY","bottom","top","hoverClientY","getClientOffset","y","drop","opacity","drag","constructorSubListItem","cursor","text","thumbnail","handleClose","SERVER_URL","getCookie","matches","cookie","match","RegExp","replace","decodeURIComponent","undefined","setCookie","props","exp","path","expires","d","Date","setTime","getTime","toUTCString","updatedCookie","encodeURIComponent","propName","propValue","SET_USER_DATA","SET_AUTH_CHECKING","SET_REGISTER_SENDING","SET_REGISTER_SEND_ERROR","SET_LOGIN_SENDING","SET_LOGIN_SEND_ERROR","SET_PASSWORD_FORGOT_EMAIL_SEND","SET_PASSWORD_FORGOT_CHANGED","SET_RESET_PASSWORD_FORGOT_ERROR","RESET_PASSWORD_FORGOT","getUser","data","getIsAuthChecking","authChecking","getRegisterError","registerError","getLoginError","loginError","getForgotPassword","forgotPassword","BurgerConstructor","user","isOrderLoading","startedOrder","setStartedOrder","totalOrderSum","prev","canDrop","dragItem","getItem","isHover","isOver","dropTarget","dragBuns","dragIngredients","outline","block","constructorList","isLocked","constructorSubList","uuid","constructorTotal","constructorTotalPrice","ingredientsId","bunId","orderData","a","fetch","method","headers","Authorization","body","JSON","stringify","res","isJson","get","indexOf","ok","Error","json","success","console","log","message","createOrder","IngredientsSuccessAction","IngredientsFailedAction","checkResponse","then","err","Promise","reject","fetchWithRefresh","url","options","token","localStorage","refreshData","setItem","refreshToken","accessToken","split","setUserData","setAuthChecking","setRegisterSendError","setLoginSendError","setPasswordForgotEmailSend","emailSend","payload","setPasswordForgotChanged","passwordChanged","setPasswordResetError","errorMessage","email","password","REQUEST_URL","isPasswordChange","Accept","error","toString","LoginPage","form","setValue","onChange","e","target","wrap","onSubmit","preventDefault","loginSending","login","formTitle","formField","formEmail","placeholder","errorText","formErrorMsg","formButton","formLinkItem","formLink","RegisterPage","registerSending","register","textAlign","ForgotPasswordPage","forgotPasswordObj","inputRef","focus","fromForgotPage","ResetPasswordPage","history","useHistory","formFieldNewPassword","ProfileSidebar","profileSidebar","sidebar","sidebarItem","sidebarLink","sidebarLinkCurrent","removeItem","sidebarSubText","UPDATE_USER_DATA","UPDATE_USER_DATA_SEND","UPDATE_USER_DATA_ERROR","getUpdatedUser","getUserUpdateSending","userUpdateSending","getUserUpdateError","userUpdateError","updateUserRequestAction","EStatus","ProfileEdit","updatedUser","stylesProfile","profileWrap","resolve","updateUser","icon","status","formButtonsContainer","formResetBtn","WS_CONNECTION_START","WS_CONNECTION_SUCCESS","WS_CONNECTION_ERROR","WS_CONNECTION_CLOSED","WS_GET_MESSAGE","getWsMessages","messages","getTotalOrderSum","orderIngredients","find","el","formatStatusOrder","Created","Done","Pending","getFormattedDate","dayjs","isToday","format","isYesterday","fromNow","locale","extend","relativeTime","OrderList","orders","withOrderStatus","orderStatus","stylesOrderList","orderList","orderItem","orderModal","orderDate","createdAt","orderItemHeader","orderItemInfo","ingredientsList","productId","array","currentProduct","ingredientsListItem","image","ingredientsListItemCount","orderItemPrice","orderItemPriceNum","ProfileOrders","setOrders","withToken","profileOrders","OrderModalInfo","isModal","orderFull","setOrderFull","useParams","foundOrder","orderListObj","orderWrap","orderNum","left","orderName","productCount","orderListItem","itemImg","itemName","itemTotal","itemCount","itemPrice","orderFooter","orderTime","orderTotal","orderTotalPrice","ProfilePage","useRouteMatch","modalOrderOpen","action","profileContainer","goBack","ErrorPage404","FeedPage","total","setTotal","totalDay","setTotalDay","totalToday","ordersDone","slice","ordersPending","feedPage","feedPageContainer","feedPageCol","orderCol","orderColTitle","orderColList","orderColListItem","ready","totalBlockNum","ProtectedRoute","isAuthChecking","render","IngredientDetails","withAddButton","container","ImgWrap","statList","calories","proteins","fat","carbohydrates","statItem","statName","productType","AuthProtectedRoute","App","wsUrl","wsActions","modalIngredientOpen","appStyles","flex","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","initialState","ingredientsFailed","orderFailed","wsConnected","wsError","wsStart","rootReducer","combineReducers","constructorBurger","uuidv4","deleted","dragCard","update","$splice","auth","currentUser","TWsActions","wsInit","onOpen","onClose","onError","onMessage","enhancer","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","applyMiddleware","thunk","socket","next","accessCookie","WebSocket","onopen","event","onerror","onmessage","parsedData","parse","onclose","createStore","DndProvider","backend","HTML5Backend","basename","process"],"mappings":"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","file":"static/js/main.3d7c0b1d.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"profileWrap\":\"profile-form_profileWrap__1OVXL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"feedPage\":\"feed_feedPage__15Irs\",\"feedPageContainer\":\"feed_feedPageContainer__EsQJO\",\"feedPageCol\":\"feed_feedPageCol__2NFrR\",\"orderList\":\"feed_orderList__1gyi-\",\"orders\":\"feed_orders__1Lwul\",\"orderCol\":\"feed_orderCol__2__hw\",\"orderColTitle\":\"feed_orderColTitle__34YYF\",\"orderColList\":\"feed_orderColList__3BS5s\",\"orderColListItem\":\"feed_orderColListItem__2Zh1b\",\"ready\":\"feed_ready__3Qveo\",\"totalBlock\":\"feed_totalBlock__11W3c\",\"totalBlockNum\":\"feed_totalBlockNum__3iyDn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"orderWrap\":\"order-info_orderWrap__24jdd\",\"orderNum\":\"order-info_orderNum__3myKs\",\"left\":\"order-info_left__Jt5eW\",\"orderStatus\":\"order-info_orderStatus__3-FXJ\",\"complete\":\"order-info_complete__357UB\",\"orderList\":\"order-info_orderList__3ZzN2\",\"orderListItem\":\"order-info_orderListItem__1VbDE\",\"itemImg\":\"order-info_itemImg__36-Yy\",\"itemName\":\"order-info_itemName__2IkX8\",\"itemTotal\":\"order-info_itemTotal__P1-Dq\",\"itemCount\":\"order-info_itemCount__2ZOWm\",\"itemPrice\":\"order-info_itemPrice__3u0XZ\",\"orderFooter\":\"order-info_orderFooter__3Hn-j\",\"orderTotal\":\"order-info_orderTotal__2EYu-\",\"orderTotalPrice\":\"order-info_orderTotalPrice__2sMwS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"mainBlock\":\"burger-ingredients_mainBlock__U8Uee\",\"tabs\":\"burger-ingredients_tabs__1yNyE\",\"categoryBlock\":\"burger-ingredients_categoryBlock__2bGyk\",\"categoryBlockItem\":\"burger-ingredients_categoryBlockItem__19jOa\",\"List\":\"burger-ingredients_List__dou0u\",\"ListItem\":\"burger-ingredients_ListItem__1vfHz\",\"ListItemLink\":\"burger-ingredients_ListItemLink__2F7W2\",\"ListImgWrap\":\"burger-ingredients_ListImgWrap__3BbSx\",\"ListItemPriceWrap\":\"burger-ingredients_ListItemPriceWrap__xeN1w\",\"ListItemPrice\":\"burger-ingredients_ListItemPrice__YlqM9\",\"ListItemName\":\"burger-ingredients_ListItemName__2-TZB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"block\":\"burger-constructor_block__1faIL\",\"constructorList\":\"burger-constructor_constructorList__3qKbN\",\"constructorSubList\":\"burger-constructor_constructorSubList__zqh9F\",\"constructorListItem\":\"burger-constructor_constructorListItem__2WUpw\",\"constructorSubListItem\":\"burger-constructor_constructorSubListItem__19WE6\",\"constructorTotal\":\"burger-constructor_constructorTotal__3DuUZ\",\"constructorTotalPrice\":\"burger-constructor_constructorTotalPrice__1llQ2\",\"noBuns\":\"burger-constructor_noBuns__3BH7a\",\"noBunsTop\":\"burger-constructor_noBunsTop__w5Mru\",\"noBunsBottom\":\"burger-constructor_noBunsBottom__1fruv\",\"noBunsMiddle\":\"burger-constructor_noBunsMiddle__1bb1C\"};","import React from \"react\";\nimport {\n  Logo,\n  BurgerIcon,\n  ListIcon,\n  ProfileIcon,\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport styles from \"./app-header.module.css\";\nimport { Link, NavLink } from \"react-router-dom\";\n\nconst AppHeader = () => {\n  return (\n    <header className={`${styles.header} mb-10 pb-4 pt-4`}>\n      <div className={styles.headerContainer}>\n        <nav className={styles.headerMenu}>\n          <NavLink\n            to=\"/\"\n            exact={true}\n            className={`${styles.headerLink} text text_type_main-default text_color_inactive`}\n            activeClassName={styles.active}\n          >\n            <BurgerIcon type=\"primary\" />\n            <span className=\"ml-4\">Конструктор</span>\n          </NavLink>\n          <NavLink\n            to=\"/feed\"\n            className={`${styles.headerLink} text text_type_main-default text_color_inactive`}\n            activeClassName={styles.active}\n          >\n            <ListIcon type=\"primary\" />\n            <span className=\"ml-4\">Лента заказов</span>\n          </NavLink>\n        </nav>\n        <div className={styles.logoWrap}>\n          <Link to=\"/\">\n            <Logo />\n          </Link>\n        </div>\n        <NavLink\n          to=\"/profile\"\n          className={`${styles.headerLink} text text_type_main-default text_color_inactive`}\n          activeClassName={styles.active}\n          exact={true}\n        >\n          <ProfileIcon type=\"primary\" />\n          <span className=\"ml-4\">Личный кабинет</span>\n        </NavLink>\n      </div>\n    </header>\n  );\n};\nexport default AppHeader;\n","// hooks.ts\nimport {\n  TypedUseSelectorHook,\n  useDispatch as dispatchHook,\n  useSelector as selectorHook,\n} from \"react-redux\";\nimport { RootState, AppThunk, AppDispatch } from \"./index\";\n\n// Теперь этот хук «знает» структуру хранилища\nexport const useSelector: TypedUseSelectorHook<RootState> = selectorHook;\nexport const useDispatch = () => dispatchHook<AppDispatch | AppThunk>();\n","export const NAME: \"constructorBurger\" = \"constructorBurger\";\nexport const ADD_BUN: \"ADD_BUN\" = \"ADD_BUN\";\nexport const ADD_INGREDIENT: \"ADD_INGREDIENT\" = \"ADD_INGREDIENT\";\nexport const REMOVE_INGREDIENT: \"REMOVE_INGREDIENT\" = \"REMOVE_INGREDIENT\";\nexport const RESET_CONSTRUCTOR: \"RESET_CONSTRUCTOR\" = \"RESET_CONSTRUCTOR\";\nexport const UPDATE_CONSTRUCTOR: \"UPDATE_CONSTRUCTOR\" = \"UPDATE_CONSTRUCTOR\";\n","import { NAME } from \"./constants\";\nimport { RootState } from \"../../types\";\n\nexport const getConstructorItems = (store: RootState) => {\n  return store[NAME];\n};\n","import React, { FC, useMemo } from \"react\";\nimport {\n  Counter,\n  CurrencyIcon,\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport styles from \"./burger-ingredients.module.css\";\n\nimport { useSelector } from \"../../types/hooks\";\nimport { getConstructorItems } from \"../../services/constructor/selectors\";\nimport { useDrag } from \"react-dnd\";\nimport { Link, useLocation } from \"react-router-dom\";\nimport { TProduct } from \"../../types/data\";\n\ntype TBurgerIngredient = {\n  product: TProduct;\n};\n\nconst BurgerIngredient: FC<TBurgerIngredient> = ({ product }) => {\n  const location = useLocation();\n  const orderState = useSelector(getConstructorItems);\n\n  const getCurrentCount = useMemo(() => {\n    return [orderState.bun, ...orderState.ingredients].reduce(\n      (acc, current) => {\n        if (current?._id === product?._id) {\n          return current.type === \"bun\" ? acc + 2 : acc + 1;\n        }\n        return acc;\n      },\n      0\n    );\n  }, [orderState, product._id]);\n\n  const [, dragRef] = useDrag({\n    type: \"ingredient\",\n    item: { ...product },\n    collect: monitor => ({\n      isDrag: monitor.isDragging(),\n    }),\n  });\n  return (\n    <li\n      className={`${styles.ListItem} mb-8 ${\n        product.type === \"bun\" ? \"bun-item\" : \"ingredient-item\"\n      }`}\n      ref={dragRef}\n    >\n      <Link\n        className={`${styles.ListItemLink}`}\n        to={{\n          pathname: `/ingredients/${product._id}`,\n          // This is the trick! This link sets\n          // the `background` in location state.\n          state: { background: location },\n        }}\n      >\n        {getCurrentCount !== 0 && (\n          <Counter count={getCurrentCount} size=\"default\" />\n        )}\n        <div className={`${styles.ListImgWrap} pl-4 pr-4`}>\n          <img src={product.image_large} alt={product.name} />\n        </div>\n        <div className={`${styles.ListItemPriceWrap} pl-4 pr-4 mt-1 mb-1`}>\n          <span\n            className={`${styles.ListItemPrice} text text_type_digits-default`}\n          >\n            {product.price}\n          </span>\n          <CurrencyIcon type=\"primary\" />\n        </div>\n        <div className={`${styles.ListItemName} text text_type_main-default`}>\n          {product.name}\n        </div>\n      </Link>\n    </li>\n  );\n};\n\nexport default BurgerIngredient;\n","export const NAME: \"ingredients\" = \"ingredients\";\nexport const LOAD_ITEMS: \"LOAD_ITEMS\" = \"LOAD_ITEMS\";\nexport const LOAD_ITEMS_SUCCESS: \"LOAD_ITEMS_SUCCESS\" = \"LOAD_ITEMS_SUCCESS\";\nexport const LOAD_ITEMS_FAILED: \"LOAD_ITEMS_FAILED\" = \"LOAD_ITEMS_FAILED\";\n","import { NAME } from \"./constants\";\nimport { RootState } from \"../../types\";\n\nexport const getIngredients = (store: RootState) => store[NAME].ingredients;\nexport const ingredientsIsLoading = (store: RootState) =>\n  store[NAME].ingredientsRequest;\n","import React from \"react\";\nimport { CurrencyIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport styles from \"./preloader.module.css\";\nconst Preloader = () => {\n  return (\n    <div className={`${styles.preloader} ${styles.pulse}`}>\n      <CurrencyIcon type=\"primary\" />\n    </div>\n  );\n};\n\nexport default Preloader;\n","import React, { useState, useEffect } from \"react\";\nimport { Tab } from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport styles from \"./burger-ingredients.module.css\";\nimport BurgerIngredient from \"./burger-ingredient\";\nimport { useSelector } from \"../../types/hooks\";\nimport {\n  getIngredients,\n  ingredientsIsLoading,\n} from \"../../services/ingredients/selectors\";\nimport { useInView } from \"react-intersection-observer\";\nimport Preloader from \"../preloader/preloader\";\nimport { TProduct } from \"../../types/data\";\n\ntype TCategoryType = {\n  name: string;\n  ref: (node: Element | null | undefined) => void;\n};\ntype TCategoryTypeMap = {\n  [name: string]: TCategoryType;\n};\n\nconst BurgerIngredients = () => {\n  const loadingIngredients = useSelector(ingredientsIsLoading);\n  const productsData = useSelector(getIngredients);\n  const [currentTab, setCurrentTab] = useState(\"bun\");\n  const categoryType: Array<string> = Array.from(\n    new Set(productsData.map((product: TProduct) => product?.type))\n  );\n  const setTab = (tab: string) => {\n    setCurrentTab(tab);\n    const element = document.getElementById(tab);\n    if (element) element.scrollIntoView({ behavior: \"smooth\" });\n  };\n  const inViewOptions = {\n    threshold: 0,\n    trackVisibility: true,\n    delay: 100,\n  };\n  const [bunRef, inViewBun] = useInView(inViewOptions);\n  const [mainRef, inViewMain] = useInView(inViewOptions);\n  const [sauceRef, inViewSauce] = useInView(inViewOptions);\n\n  const categoryTypeMap: TCategoryTypeMap = {\n    bun: {\n      name: \"Булки\",\n      ref: bunRef,\n    },\n    sauce: {\n      name: \"Соусы\",\n      ref: sauceRef,\n    },\n    main: { name: \"Начинки\", ref: mainRef },\n  };\n  useEffect(() => {\n    if (inViewBun) {\n      setCurrentTab(\"bun\");\n    } else if (inViewSauce) {\n      setCurrentTab(\"sauce\");\n    } else if (inViewMain) {\n      setCurrentTab(\"main\");\n    }\n  }, [inViewBun, inViewMain, inViewSauce]);\n  if (loadingIngredients) {\n    return <Preloader />;\n  }\n  return (\n    <div className={`${styles.mainBlock} mr-10`}>\n      <h2 className={`text text_type_main-large mb-5`}>Соберите бургер</h2>\n      <div className={`${styles.tabs} mb-10`}>\n        {Object.entries(categoryTypeMap).map(([type, category]) => (\n          <Tab\n            value={type}\n            active={currentTab === type}\n            onClick={setTab}\n            key={type}\n          >\n            {category.name}\n          </Tab>\n        ))}\n      </div>\n      <ul className={`${styles.categoryBlock} custom-scroll`}>\n        {categoryType.length\n          ? categoryType.map((type) => (\n              <li\n                key={type}\n                className={`${styles.categoryBlockItem} mb-10`}\n                id={type}\n                ref={categoryTypeMap[type].ref}\n              >\n                <strong className={`mb-6 text text_type_main-medium`}>\n                  {categoryTypeMap[type].name}\n                </strong>\n                <ul className={`${styles.List} pl-4 pr-4`}>\n                  {productsData\n                    .filter((product: TProduct) => product.type === type)\n                    .map((product: TProduct) => (\n                      <BurgerIngredient product={product} key={product._id} />\n                    ))}\n                </ul>\n              </li>\n            ))\n          : null}\n      </ul>\n    </div>\n  );\n};\n\nexport default BurgerIngredients;\n","import React, { FC } from \"react\";\nimport styles from \"./modal.module.css\";\n\ntype TModalOverlayTypes = {\n  clickHandler: () => void;\n};\nconst ModalOverlay: FC<TModalOverlayTypes> = ({ clickHandler }) => {\n  return <div className={styles.modalOverlay} onClick={clickHandler} />;\n};\nexport default ModalOverlay;\n","import React, { FC, useEffect } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { CloseIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport ModalOverlay from \"./modal-overlay\";\nimport styles from \"./modal.module.css\";\n\ntype TModalTypes = {\n  headerTitle?: string;\n  visible: boolean;\n  setFunc: (bool: boolean) => void;\n  withHeader?: boolean;\n};\nconst modalRoot = document.getElementById(\"react-modals\");\nconst Modal: FC<TModalTypes> = ({\n  children,\n  headerTitle,\n  visible,\n  setFunc,\n  withHeader = true,\n}) => {\n  const handleEscClose = (evt: KeyboardEvent) => {\n    if (evt.key === \"Escape\") {\n      setFunc(false);\n    }\n  };\n  useEffect(() => {\n    document.addEventListener(\"keyup\", handleEscClose);\n    return () => {\n      document.removeEventListener(\"keyup\", handleEscClose);\n    };\n  });\n  if (!modalRoot) return null;\n  return ReactDOM.createPortal(\n    visible ? (\n      <div className={`${styles.modal} ${visible ? styles.show : \"\"}`}>\n        <ModalOverlay\n          clickHandler={() => {\n            setFunc(false);\n          }}\n        />\n        <div\n          className={`${styles.modalBody} pl-10 pr-10 pt-10 pb-10`}\n          onClick={(evt) => evt.stopPropagation()}\n        >\n          <button\n            title=\"Закрыть\"\n            className={`${styles.modalCloseBtn} reset-btn`}\n            onClick={() => {\n              setFunc(false);\n            }}\n          >\n            <CloseIcon type=\"primary\" />\n          </button>\n          {withHeader ? (\n            <div className={styles.modalHeader}>\n              {headerTitle && (\n                <strong className={\"text text_type_main-large\"}>\n                  {headerTitle}\n                </strong>\n              )}\n            </div>\n          ) : null}\n\n          <div className={styles.modalContent}>{children}</div>\n        </div>\n      </div>\n    ) : (\n      <></>\n    ),\n    modalRoot\n  );\n};\n\nexport default Modal;\n","export default __webpack_public_path__ + \"static/media/done.e036971b.png\";","export const NAME: \"order\" = \"order\";\nexport const CREATE_ORDER_REQUEST: \"CREATE_ORDER_REQUEST\" =\n  \"CREATE_ORDER_REQUEST\";\nexport const CREATE_ORDER_SUCCESS: \"CREATE_ORDER_SUCCESS\" =\n  \"CREATE_ORDER_SUCCESS\";\nexport const CREATE_ORDER_FAILED: \"CREATE_ORDER_FAILED\" = \"CREATE_ORDER_FAILED\";\n","import { NAME } from \"./constants\";\nimport { RootState } from \"../../types\";\n\nexport const getFullOrder = (store: RootState) => store[NAME].orderInfo;\nexport const getOrder = (store: RootState) => store[NAME].orderInfo?.order;\nexport const isOrderRequest = (store: RootState) => store[NAME].orderRequest;\n","import React from \"react\";\nimport styles from \"./order.module.css\";\nimport done from \"../../images/done.png\";\nimport { useSelector } from \"../../types/hooks\";\nimport { getOrder } from \"../../services/order/selectors\";\n\nconst OrderDetails = () => {\n  const order = useSelector(getOrder);\n\n  return (\n    <div className={styles.order}>\n      <strong className={`${styles.order} text text_type_digits-large mb-8`}>\n        {order?.number}\n      </strong>\n      <p className=\"text text_type_main-medium mb-15\">идентификатор заказа</p>\n      <img className=\"mb-15\" src={done} alt=\"done\" />\n      <p className=\"text text_type_main-default mb-2\">\n        Ваш заказ начали готовить\n      </p>\n      <p className=\"text text_type_main-default text_color_inactive mb-15\">\n        Дождитесь готовности на орбитальной станции\n      </p>\n    </div>\n  );\n};\n\nexport default OrderDetails;\n","import React, { CSSProperties, FC } from \"react\";\n\nimport styles from \"./burger-constructor.module.css\";\n\ntype TEmptyConstructorElement = {\n  name: string;\n  position: string;\n  style?: CSSProperties;\n};\nconst EmptyConstructorElement: FC<TEmptyConstructorElement> = ({\n  name,\n  position,\n  style,\n}) => {\n  return (\n    <div className={`${styles.constructorListItem} pr-8 pl-6`}>\n      <div\n        style={style}\n        className={`${styles.noBuns} ${styles[position]} text text_type_main-default`}\n      >\n        {name}\n      </div>\n    </div>\n  );\n};\n\nexport default EmptyConstructorElement;\n","import {\n  ADD_BUN,\n  ADD_INGREDIENT,\n  REMOVE_INGREDIENT,\n  RESET_CONSTRUCTOR,\n  UPDATE_CONSTRUCTOR,\n} from \"./constants\";\nimport { TProduct } from \"../../types/data\";\n\nexport interface IAddBun {\n  readonly type: typeof ADD_BUN;\n  bun: TProduct;\n}\nexport interface IAddIngredient {\n  readonly type: typeof ADD_INGREDIENT;\n  ingredient: TProduct;\n}\nexport interface IRemoveIngredient {\n  readonly type: typeof REMOVE_INGREDIENT;\n  ingredient: TProduct;\n}\nexport interface IResetConstructor {\n  readonly type: typeof RESET_CONSTRUCTOR;\n}\nexport interface IUpdateConstructor {\n  readonly type: typeof UPDATE_CONSTRUCTOR;\n  value: { dragIndex: number; hoverIndex: number };\n}\n\nexport type TConstructor =\n  | IAddBun\n  | IAddIngredient\n  | IRemoveIngredient\n  | IResetConstructor\n  | IUpdateConstructor;\n\nexport const addBunAction = (bun: TProduct): IAddBun => ({\n  type: ADD_BUN,\n  bun,\n});\nexport const addIngredientAction = (ingredient: TProduct): IAddIngredient => ({\n  type: ADD_INGREDIENT,\n  ingredient,\n});\nexport const removeIngredientAction = (\n  ingredient: TProduct\n): IRemoveIngredient => ({\n  type: REMOVE_INGREDIENT,\n  ingredient,\n});\nexport const resetConstructorAction = (): IResetConstructor => ({\n  type: RESET_CONSTRUCTOR,\n});\nexport const updateIngredientAction = (value: {\n  dragIndex: number;\n  hoverIndex: number;\n}): IUpdateConstructor => ({\n  type: UPDATE_CONSTRUCTOR,\n  value,\n});\n","import React, { FC, useRef } from \"react\";\nimport {\n  ConstructorElement,\n  DragIcon,\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport { useDispatch } from \"../../types/hooks\";\nimport { useDrop, useDrag, DropTargetMonitor } from \"react-dnd\";\nimport styles from \"./burger-constructor.module.css\";\nimport { TProduct } from \"../../types/data\";\nimport { XYCoord } from \"dnd-core\";\nimport {\n  removeIngredientAction,\n  updateIngredientAction,\n} from \"../../services/constructor/action-type\";\ntype TConstructorElement = {\n  product: TProduct;\n  index: number;\n  ingredientsLength: number;\n};\ninterface DragItem {\n  index: number;\n  id: string;\n  type: string;\n}\n\nconst ConstructorSubElement: FC<TConstructorElement> = ({\n  product,\n  index,\n  ingredientsLength,\n}) => {\n  const dispatch = useDispatch();\n  const id = product._id;\n  const ref = useRef<HTMLDivElement>(null);\n  const [{ handlerId }, drop] = useDrop({\n    accept: \"constrElem\",\n    collect(monitor) {\n      return {\n        handlerId: monitor.getHandlerId(),\n      };\n    },\n    hover(item: DragItem, monitor: DropTargetMonitor) {\n      if (!ref.current) {\n        return;\n      }\n      const dragIndex = item.index;\n      const hoverIndex = index;\n      // Don't replace items with themselves\n      if (dragIndex === hoverIndex) {\n        return;\n      }\n      // Determine rectangle on screen\n      const hoverBoundingRect = ref.current?.getBoundingClientRect();\n      // Get vertical middle\n      const hoverMiddleY =\n        (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\n      // Determine mouse position\n      const clientOffset = monitor.getClientOffset();\n      // Get pixels to the top\n      const hoverClientY = (clientOffset as XYCoord).y - hoverBoundingRect.top;\n      // Only perform the move when the mouse has crossed half of the items height\n      // When dragging downwards, only move when the cursor is below 50%\n      // When dragging upwards, only move when the cursor is above 50%\n      // Dragging downwards\n      if (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) {\n        return;\n      }\n      // Dragging upwards\n      if (dragIndex > hoverIndex && hoverClientY > hoverMiddleY) {\n        return;\n      }\n      // Time to actually perform the action\n      // moveCard(dragIndex, hoverIndex);\n      dispatch(updateIngredientAction({ dragIndex, hoverIndex }));\n      // Note: we're mutating the monitor item here!\n      // Generally it's better to avoid mutations,\n      // but it's good here for the sake of performance\n      // to avoid expensive index searches.\n      item.index = hoverIndex;\n    },\n  });\n  const [{ isDragging }, drag] = useDrag({\n    type: \"constrElem\",\n    item: () => {\n      return { id, index };\n    },\n    collect: monitor => ({\n      isDragging: monitor.isDragging(),\n    }),\n  });\n  const opacity = isDragging ? 0 : 1;\n  drag(drop(ref));\n  const style = {\n    cursor: \"move\",\n  };\n  return (\n    <div\n      className={`${styles.constructorSubListItem} ${\n        ingredientsLength < 6 ? \"pr-4\" : \"pr-2\"\n      }`}\n      ref={ref}\n      style={{ ...style, opacity }}\n      data-handler-id={handlerId}\n    >\n      <DragIcon type=\"primary\" />\n      <ConstructorElement\n        text={product.name}\n        price={product.price}\n        thumbnail={product.image_large}\n        handleClose={() => {\n          dispatch(removeIngredientAction(product));\n        }}\n      />\n    </div>\n  );\n};\n\nexport default ConstructorSubElement;\n","export const SERVER_URL = \"https://norma.nomoreparties.space/api\";\nexport const WS_URL = \"wss://norma.nomoreparties.space/orders\";\n","export function getCookie(name: string) {\n  const matches = document.cookie.match(\n    /*eslint-disable */\n    new RegExp(\n      \"(?:^|; )\" +\n        name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, \"\\\\$1\") +\n        \"=([^;]*)\"\n    )\n    /*eslint-enable */\n  );\n  return matches ? decodeURIComponent(matches[1]) : undefined;\n}\n\nexport function setCookie(name: string, value: string | null, props?: any) {\n  props = {\n    path: \"/\", //задаем корневой адрес для cookies\n    ...props,\n  };\n  let exp = props.expires;\n  if (typeof exp == \"number\" && exp) {\n    const d = new Date();\n    d.setTime(d.getTime() + exp * 1000);\n    exp = props.expires = d;\n  }\n  if (exp && exp.toUTCString) {\n    props.expires = exp.toUTCString();\n  }\n  value = encodeURIComponent(value || \"\");\n  let updatedCookie = name + \"=\" + value;\n  for (const propName in props) {\n    updatedCookie += \"; \" + propName;\n    const propValue = props[propName];\n    if (propValue !== true) {\n      updatedCookie += \"=\" + propValue;\n    }\n  }\n  document.cookie = updatedCookie;\n}\n\nexport function deleteCookie(name: string) {\n  setCookie(name, null, { expires: -1 });\n}\n","import { SERVER_URL } from \"../../utils/constants\";\nimport { resetConstructorAction } from \"../constructor/action-type\";\nimport {\n  createOrderRequestAction,\n  createOrderSuccessAction,\n  createOrderFailedAction,\n} from \"./action-type\";\nimport { AppDispatch } from \"../../types\";\nimport { getCookie } from \"../../utils/cookie\";\n\nexport const createOrder = (\n  data: {\n    ingredients: (string | undefined)[];\n  },\n  setStartedOrder: (status: boolean) => void\n) => {\n  return async function (dispatch: AppDispatch) {\n    try {\n      dispatch(createOrderRequestAction());\n      const res = await fetch(`${SERVER_URL}/orders`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${getCookie(\"accessToken\")}`,\n        },\n\n        body: JSON.stringify(data),\n      });\n      const isJson =\n        // @ts-ignore\n        res.headers.get(\"content-type\").indexOf(\"application/json\") !== -1;\n      if (!res.ok) {\n        throw new Error(\"Ответ сети не ok\");\n      }\n      if (!isJson) {\n        throw new Error(\"Ответ сети не json\");\n      }\n      const json = await res.json();\n      if (json.success) {\n        dispatch(createOrderSuccessAction(json));\n        dispatch(resetConstructorAction());\n        setStartedOrder(true);\n      }\n    } catch (error: any) {\n      console.log(error.message);\n      dispatch(createOrderFailedAction());\n    }\n  };\n};\n","export const NAME: \"auth\" = \"auth\";\n\nexport const SET_USER_DATA: `SET_DATA` = `SET_DATA`;\nexport const SET_AUTH_CHECKING: `SET_AUTH_CHECKING` = `SET_AUTH_CHECKING`;\n\nexport const SET_REGISTER_SENDING: `SET_REGISTER_SENDING` = `SET_REGISTER_SENDING`;\nexport const SET_REGISTER_SEND_ERROR: `SET_REGISTER_SEND_ERROR` = `SET_REGISTER_SEND_ERROR`;\n\nexport const SET_LOGIN_SENDING: `SET_LOGIN_SENDING` = `SET_LOGIN_SENDING`;\nexport const SET_LOGIN_SEND_ERROR: `SET_LOGIN_SEND_ERROR` = `SET_LOGIN_SEND_ERROR`;\n\nexport const SET_PASSWORD_FORGOT_EMAIL_SEND: `SET_PASSWORD_FORGOT_EMAIL_SEND` = `SET_PASSWORD_FORGOT_EMAIL_SEND`;\nexport const SET_PASSWORD_FORGOT_CHANGED: `SET_PASSWORD_FORGOT_CHANGED` = `SET_PASSWORD_FORGOT_CHANGED`;\nexport const SET_RESET_PASSWORD_FORGOT_ERROR: `SET_RESET_PASSWORD_FORGOT_ERROR` = `SET_RESET_PASSWORD_FORGOT_ERROR`;\nexport const RESET_PASSWORD_FORGOT: `RESET_PASSWORD_FORGOT` = `RESET_PASSWORD_FORGOT`;\n","import { NAME } from \"./constants\";\nimport { RootState } from \"../../types\";\n\nexport const getUser = (store: RootState) => store[NAME].data;\nexport const getIsAuth = (store: RootState) => !!store[NAME].data;\n\nexport const getIsAuthChecking = (store: RootState) => store[NAME].authChecking;\n\nexport const getRegisterSending = (store: RootState) =>\n  store[NAME].registerSending;\nexport const getRegisterError = (store: RootState) => store[NAME].registerError;\n\nexport const getLoginSending = (store: RootState) => store[NAME].loginSending;\nexport const getLoginError = (store: RootState) => store[NAME].loginError;\n\nexport const getForgotPassword = (store: RootState) =>\n  store[NAME].forgotPassword;\n","import React, { useMemo, useState } from \"react\";\nimport {\n  Button,\n  ConstructorElement,\n  CurrencyIcon,\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport Modal from \"../modal/modal\";\nimport OrderDetails from \"../order-details/order-details\";\nimport styles from \"./burger-constructor.module.css\";\n\nimport EmptyConstructorElement from \"./empty-contstructor-element\";\nimport ConstructorSubElement from \"./contstructor-element\";\nimport { useDispatch, useSelector } from \"../../types/hooks\";\nimport { getConstructorItems } from \"../../services/constructor/selectors\";\nimport { createOrder } from \"../../services/order/actions\";\nimport { useDrop } from \"react-dnd\";\nimport { getUser } from \"../../services/auth/selectors\";\nimport { Redirect, useLocation } from \"react-router-dom\";\nimport { TProduct } from \"../../types/data\";\nimport {\n  addBunAction,\n  addIngredientAction,\n} from \"../../services/constructor/action-type\";\nimport { isOrderRequest } from \"../../services/order/selectors\";\n\nconst BurgerConstructor = () => {\n  const location = useLocation();\n  const user = useSelector(getUser);\n  const dispatch = useDispatch();\n  const orderState = useSelector(getConstructorItems);\n  const isOrderLoading = useSelector(isOrderRequest);\n  const { bun, ingredients } = orderState;\n  const [startedOrder, setStartedOrder] = useState(false);\n  const startOrderHandle = () => {\n    if (!user) {\n      setStartedOrder(true);\n      return;\n    }\n    const ingredientsId = [\n      ...orderState.ingredients.map((product: TProduct) => product._id),\n    ];\n    const bunId = orderState.bun?._id;\n    const orderData = {\n      ingredients: [...ingredientsId, bunId],\n    };\n    dispatch(createOrder(orderData, setStartedOrder));\n  };\n  const totalOrderSum = useMemo(() => {\n    if (!orderState.bun && !orderState.ingredients.length) return 0;\n    return [orderState.bun, ...orderState.ingredients].reduce(\n      (prev, current) => {\n        if (current && current.type) {\n          return (\n            prev + (current.type === \"bun\" ? current.price * 2 : current.price)\n          );\n        }\n        return prev + 0;\n      },\n      0\n    );\n  }, [orderState]);\n\n  const [{ canDrop, dragItem }, dropTarget] = useDrop({\n    accept: \"ingredient\",\n    drop(item: TProduct) {\n      dispatch(\n        item.type === \"bun\" ? addBunAction(item) : addIngredientAction(item)\n      );\n    },\n    collect: monitor => {\n      return {\n        canDrop: monitor.canDrop(),\n        dragItem: monitor.getItem(),\n        isHover: monitor.isOver(),\n      };\n    },\n  });\n  const dragBuns = canDrop && dragItem && dragItem.type === \"bun\";\n  const dragIngredients = canDrop && dragItem && dragItem.type !== \"bun\";\n  const outline = \"1px solid #fff\";\n\n  if (startedOrder && !user) {\n    return (\n      <Redirect\n        to={{\n          pathname: \"/login\",\n          state: { from: location },\n        }}\n      />\n    );\n  }\n  return (\n    <div className={`${styles.block} pt-25 pb-15 pl-4`}>\n      <div className={`${styles.constructorList} mb-10`} ref={dropTarget}>\n        {!bun ? (\n          <EmptyConstructorElement\n            name=\"Выберите булки\"\n            position=\"noBunsTop\"\n            style={dragBuns ? { outline } : {}}\n          />\n        ) : (\n          <div className={`${styles.constructorListItem} pr-4 pl-6`}>\n            <ConstructorElement\n              type=\"top\"\n              isLocked={true}\n              text={`${bun.name} (верх)`}\n              price={bun.price}\n              thumbnail={bun.image_large}\n            />\n          </div>\n        )}\n        <div className={`${styles.constructorSubList} custom-scroll`}>\n          {ingredients.length ? (\n            ingredients.map((product: TProduct, index: number) => {\n              return (\n                <ConstructorSubElement\n                  product={product}\n                  key={product.uuid}\n                  index={index}\n                  ingredientsLength={ingredients.length}\n                />\n              );\n            })\n          ) : (\n            <EmptyConstructorElement\n              name=\"Выберите начинку\"\n              position=\"noBunsMiddle\"\n              style={dragIngredients ? { outline } : {}}\n            />\n          )}\n        </div>\n\n        {!bun ? (\n          <EmptyConstructorElement\n            name=\"Выберите булки\"\n            position=\"noBunsButtom\"\n            style={dragBuns ? { outline } : {}}\n          />\n        ) : (\n          <div className={`${styles.constructorListItem} pr-4 pl-6`}>\n            <ConstructorElement\n              type=\"bottom\"\n              isLocked={true}\n              text={`${bun.name} (низ)`}\n              price={bun.price}\n              thumbnail={bun.image_large}\n            />\n          </div>\n        )}\n      </div>\n      <div className={`${styles.constructorTotal} mr-4`}>\n        {totalOrderSum ? (\n          <div className={`${styles.constructorTotalPrice} mr-10`}>\n            <p className=\"text text_type_digits-medium\">{totalOrderSum}</p>\n            <CurrencyIcon type=\"primary\" />\n          </div>\n        ) : null}\n\n        {totalOrderSum && bun ? (\n          <Button type=\"primary\" size=\"large\" onClick={startOrderHandle}>\n            {isOrderLoading ? \"Оформление...\" : \"Оформить заказ\"}\n          </Button>\n        ) : null}\n\n        {startedOrder && (\n          <Modal visible={startedOrder} setFunc={setStartedOrder}>\n            <OrderDetails />\n          </Modal>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default BurgerConstructor;\n","import {\n  CREATE_ORDER_REQUEST,\n  CREATE_ORDER_SUCCESS,\n  CREATE_ORDER_FAILED,\n} from \"./constants\";\nimport { TOrderCreated } from \"../../types/data\";\n\nexport interface ICreateOrderRequest {\n  readonly type: typeof CREATE_ORDER_REQUEST;\n}\nexport interface ICreateOrderSuccess {\n  readonly type: typeof CREATE_ORDER_SUCCESS;\n  order: TOrderCreated;\n}\nexport interface ICreateOrderFailed {\n  readonly type: typeof CREATE_ORDER_FAILED;\n}\n\nexport type TOrder =\n  | ICreateOrderRequest\n  | ICreateOrderSuccess\n  | ICreateOrderFailed;\n\nexport const createOrderRequestAction = (): ICreateOrderRequest => ({\n  type: CREATE_ORDER_REQUEST,\n});\nexport const createOrderSuccessAction = (\n  order: TOrderCreated\n): ICreateOrderSuccess => ({\n  type: CREATE_ORDER_SUCCESS,\n  order,\n});\nexport const createOrderFailedAction = (): ICreateOrderFailed => ({\n  type: CREATE_ORDER_FAILED,\n});\n","import { LOAD_ITEMS, LOAD_ITEMS_SUCCESS, LOAD_ITEMS_FAILED } from \"./constants\";\nimport { TProduct } from \"../../types/data\";\n\nexport interface IIngredientFailed {\n  readonly type: typeof LOAD_ITEMS_FAILED;\n}\n\nexport interface IIngredientRequest {\n  readonly type: typeof LOAD_ITEMS;\n}\n\nexport interface IIngredientSuccess {\n  readonly type: typeof LOAD_ITEMS_SUCCESS;\n  readonly data: TProduct[];\n}\n\nexport type TIngredient =\n  | IIngredientFailed\n  | IIngredientRequest\n  | IIngredientSuccess;\n\nexport const IngredientsSuccessAction = (\n  data: TProduct[]\n): IIngredientSuccess => ({\n  type: LOAD_ITEMS_SUCCESS,\n  data,\n});\n\nexport const IngredientsRequestAction = (): IIngredientRequest => ({\n  type: LOAD_ITEMS,\n});\n\nexport const IngredientsFailedAction = (): IIngredientFailed => ({\n  type: LOAD_ITEMS_FAILED,\n});\n","import { SERVER_URL } from \"./constants\";\nimport { setCookie } from \"./cookie\";\n\nconst checkResponse = (res: Response): Promise<any> => {\n  return res.ok ? res.json() : res.json().then(err => Promise.reject(err));\n};\n\nexport const refreshToken = () => {\n  return fetch(`${SERVER_URL}/auth/token`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json;charset=utf-8\",\n    },\n    body: JSON.stringify({\n      token: localStorage.getItem(\"refreshToken\"),\n    }),\n  }).then(checkResponse);\n};\n\ntype Overwrite<T, U> = Pick<T, Exclude<keyof T, keyof U>> & U;\ntype MyRequestInit = Overwrite<\n  RequestInit,\n  { headers: Record<string, string> }\n>;\n\nexport const fetchWithRefresh = async (url: string, options: MyRequestInit) => {\n  try {\n    const res = await fetch(url, options);\n    return await checkResponse(res);\n  } catch (err: any) {\n    if (err.message === \"jwt expired\") {\n      const refreshData = await refreshToken(); //обновляем токен\n      localStorage.setItem(\"refreshToken\", refreshData.refreshToken);\n      setCookie(\"accessToken\", refreshData.accessToken.split(\"Bearer \")[1]);\n      if (options.headers) {\n        options.headers[\"authorization\"] = refreshData.accessToken;\n      }\n      const res = await fetch(url, options); //повторяем запрос\n      return await checkResponse(res);\n    }\n    return Promise.reject(err);\n  }\n};\n","import { TUser } from \"../../types/data\";\nimport {\n  SET_USER_DATA,\n  SET_AUTH_CHECKING,\n  SET_REGISTER_SENDING,\n  SET_REGISTER_SEND_ERROR,\n  SET_LOGIN_SENDING,\n  SET_LOGIN_SEND_ERROR,\n  SET_PASSWORD_FORGOT_EMAIL_SEND,\n  SET_PASSWORD_FORGOT_CHANGED,\n  SET_RESET_PASSWORD_FORGOT_ERROR,\n  RESET_PASSWORD_FORGOT,\n} from \"./constants\";\n\nexport interface IUserData {\n  readonly type: typeof SET_USER_DATA;\n  data: TUser | null;\n}\nexport interface IAuthChecking {\n  readonly type: typeof SET_AUTH_CHECKING;\n  authChecking: boolean;\n}\nexport interface IRegisterSending {\n  readonly type: typeof SET_REGISTER_SENDING;\n  registerSending: boolean;\n}\nexport interface IRegisterSendError {\n  readonly type: typeof SET_REGISTER_SEND_ERROR;\n  registerError: string;\n}\nexport interface ILoginSending {\n  readonly type: typeof SET_LOGIN_SENDING;\n  loginSending: boolean;\n}\nexport interface ILoginSendError {\n  readonly type: typeof SET_LOGIN_SEND_ERROR;\n  loginError: string;\n}\nexport interface IPasswordForgotEmailSend {\n  readonly type: typeof SET_PASSWORD_FORGOT_EMAIL_SEND;\n  payload: {\n    emailSend: boolean;\n    message: string;\n  };\n}\nexport interface IPasswordForgotChanged {\n  readonly type: typeof SET_PASSWORD_FORGOT_CHANGED;\n  payload: {\n    passwordChanged: boolean;\n    message: string;\n  };\n}\nexport interface IPasswordResetError {\n  readonly type: typeof SET_RESET_PASSWORD_FORGOT_ERROR;\n  payload: {\n    errorMessage: string;\n  };\n}\nexport interface IPasswordReset {\n  readonly type: typeof RESET_PASSWORD_FORGOT;\n}\n\nexport type TAuth =\n  | IUserData\n  | IAuthChecking\n  | IRegisterSending\n  | IRegisterSendError\n  | ILoginSending\n  | ILoginSendError\n  | IPasswordForgotEmailSend\n  | IPasswordForgotChanged\n  | IPasswordResetError\n  | IPasswordReset;\n\nexport const setUserData = (data: TUser | null): IUserData => ({\n  type: SET_USER_DATA,\n  data,\n});\nexport const setAuthChecking = (authChecking: boolean): IAuthChecking => ({\n  type: SET_AUTH_CHECKING,\n  authChecking,\n});\nexport const setRegisterSending = (\n  registerSending: boolean\n): IRegisterSending => ({\n  type: SET_REGISTER_SENDING,\n  registerSending,\n});\nexport const setRegisterSendError = (\n  registerError: string\n): IRegisterSendError => ({\n  type: SET_REGISTER_SEND_ERROR,\n  registerError,\n});\nexport const setLoginSending = (loginSending: boolean): ILoginSending => ({\n  type: SET_LOGIN_SENDING,\n  loginSending,\n});\nexport const setLoginSendError = (loginError: string): ILoginSendError => ({\n  type: SET_LOGIN_SEND_ERROR,\n  loginError,\n});\nexport const setPasswordForgotEmailSend = ({\n  emailSend,\n  message,\n}: {\n  emailSend: boolean;\n  message: string;\n}): IPasswordForgotEmailSend => ({\n  type: SET_PASSWORD_FORGOT_EMAIL_SEND,\n  payload: {\n    emailSend,\n    message,\n  },\n});\nexport const setPasswordForgotChanged = ({\n  passwordChanged,\n  message,\n}: {\n  passwordChanged: boolean;\n  message: string;\n}): IPasswordForgotChanged => ({\n  type: SET_PASSWORD_FORGOT_CHANGED,\n  payload: {\n    passwordChanged,\n    message,\n  },\n});\nexport const setPasswordResetError = ({\n  errorMessage,\n}: {\n  errorMessage: string;\n}): IPasswordResetError => ({\n  type: SET_RESET_PASSWORD_FORGOT_ERROR,\n  payload: {\n    errorMessage,\n  },\n});\nexport const setPasswordReset = (): IPasswordReset => ({\n  type: RESET_PASSWORD_FORGOT,\n});\n","import { SERVER_URL } from \"../../utils/constants\";\nimport { deleteCookie, getCookie, setCookie } from \"../../utils/cookie\";\nimport { fetchWithRefresh } from \"../../utils/auth-api\";\nimport {\n  setAuthChecking,\n  setLoginSendError,\n  setLoginSending,\n  setPasswordForgotChanged,\n  setPasswordForgotEmailSend,\n  setPasswordResetError,\n  setRegisterSendError,\n  setRegisterSending,\n  setUserData,\n} from \"./action-type\";\nimport { AppDispatch } from \"../../types\";\nimport { TUser } from \"../../types/data\";\n\nexport function register({ name, password, email }: TUser) {\n  return async function (dispatch: AppDispatch) {\n    dispatch(setRegisterSending(true));\n    // Запрашиваем данные у сервера\n    try {\n      const res = await fetch(`${SERVER_URL}/auth/register`, {\n        method: \"POST\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({ name, email, password }),\n      });\n      const isJson =\n        // @ts-ignore\n        res.headers.get(\"content-type\").indexOf(\"application/json\") !== -1;\n      if (!isJson) {\n        throw new Error(\"Ответ сети не json\");\n      }\n      if (!res.ok) {\n        const { message } = await res.json();\n        throw new Error(`Ответ сети не ok. Ошибка: ${message}`);\n      }\n      const { user, accessToken, refreshToken } = await res.json();\n      setCookie(\"accessToken\", accessToken.split(\"Bearer \")[1]);\n      localStorage.setItem(\"refreshToken\", refreshToken);\n\n      dispatch(setUserData(user));\n      dispatch(setRegisterSendError(\"\"));\n    } catch (error: any) {\n      dispatch(setRegisterSendError(error.toString() || \"\"));\n    }\n  };\n}\nexport function login({\n  email,\n  password,\n}: {\n  email: string;\n  password: string;\n}) {\n  return async function (dispatch: AppDispatch) {\n    dispatch(setLoginSending(true));\n    // Запрашиваем данные у сервера\n    try {\n      const res = await fetch(`${SERVER_URL}/auth/login`, {\n        method: \"POST\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({ email, password }),\n      });\n      const isJson =\n        // @ts-ignore\n        res.headers.get(\"content-type\").indexOf(\"application/json\") !== -1;\n      if (!isJson) {\n        throw new Error(\"Ответ сети не json\");\n      }\n      if (!res.ok) {\n        const { message } = await res.json();\n        throw new Error(message);\n      }\n      const { user, accessToken, refreshToken } = await res.json();\n      setCookie(\"accessToken\", accessToken.split(\"Bearer \")[1]);\n      localStorage.setItem(\"refreshToken\", refreshToken);\n\n      dispatch(setUserData(user));\n      dispatch(setLoginSendError(\"\"));\n    } catch (error: any) {\n      dispatch(setLoginSendError(error.toString() || \"\"));\n    }\n  };\n}\nexport function signOut() {\n  return async function (dispatch: AppDispatch) {\n    // Запрашиваем данные у сервера\n    try {\n      const res = await fetch(`${SERVER_URL}/auth/logout`, {\n        method: \"POST\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({ token: localStorage.getItem(\"refreshToken\") }),\n      });\n      const isJson =\n        // @ts-ignore\n        res.headers.get(\"content-type\").indexOf(\"application/json\") !== -1;\n      if (!isJson) {\n        throw new Error(\"Ответ сети не json\");\n      }\n      if (!res.ok) {\n        const { message } = await res.json();\n        throw new Error(`Ответ сети не ok. Ошибка: ${message}`);\n      }\n      // const response = await res.json();\n      dispatch(setUserData(null));\n      localStorage.removeItem(\"refreshToken\");\n      deleteCookie(\"accessToken\");\n    } catch (error: any) {\n      console.error(error);\n    }\n  };\n}\nexport function checkAuth() {\n  return async function (dispatch: AppDispatch) {\n    dispatch(setAuthChecking(true));\n    const token = localStorage.getItem(\"refreshToken\");\n    if (token) {\n      return fetchWithRefresh(`${SERVER_URL}/auth/user`, {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${getCookie(\"accessToken\")}`,\n        },\n      }).then(res => {\n        const { user } = res;\n        dispatch(setUserData(user));\n        dispatch(setAuthChecking(false));\n      });\n    } else {\n      dispatch(setAuthChecking(false));\n      return Promise.resolve();\n    }\n  };\n}\nexport function forgotPassword({\n  email,\n  password,\n  token,\n}: {\n  email: string;\n  password: string;\n  token: string;\n}) {\n  return async function (dispatch: AppDispatch) {\n    const isPasswordChange = password && token;\n    const REQUEST_URL = isPasswordChange\n      ? `${SERVER_URL}/password-reset/reset`\n      : `${SERVER_URL}/password-reset`;\n    // Запрашиваем данные у сервера\n    try {\n      const res = await fetch(REQUEST_URL, {\n        method: \"POST\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({ email, password, token }),\n      });\n      const isJson =\n        // @ts-ignore\n        res.headers.get(\"content-type\").indexOf(\"application/json\") !== -1;\n      if (!isJson) {\n        throw new Error(\"Ответ сети не json\");\n      }\n      if (!res.ok) {\n        const { message } = await res.json();\n        throw new Error(`Ответ сети не ok. Ошибка: ${message}`);\n      }\n      const { success, message } = await res.json();\n      if (isPasswordChange) {\n        dispatch(\n          setPasswordForgotChanged({ passwordChanged: success, message })\n        );\n      } else {\n        dispatch(setPasswordForgotEmailSend({ emailSend: success, message }));\n      }\n    } catch (error: any) {\n      console.error(error);\n      dispatch(setPasswordResetError({ errorMessage: error.toString() }));\n    }\n  };\n}\n","import React, { useState, SyntheticEvent, ChangeEvent } from \"react\";\nimport styles from \"./page.module.css\";\nimport {\n  Button,\n  Input,\n  PasswordInput,\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport { Link } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"../types/hooks\";\nimport { login } from \"../services/auth/actions\";\nimport { getLoginError } from \"../services/auth/selectors\";\n\nconst LoginPage = () => {\n  const loginError = useSelector(getLoginError);\n  const dispatch = useDispatch();\n  const [form, setValue] = useState({\n    email: \"\",\n    password: \"\",\n  });\n  const handleSubmit = (e: SyntheticEvent) => {\n    e.preventDefault();\n    dispatch(login(form));\n  };\n  const onChange = (e: ChangeEvent<HTMLInputElement>) => {\n    setValue({ ...form, [e.target.name]: e.target.value });\n  };\n\n  return (\n    <div className={styles.wrap}>\n      <form className={styles.form} onSubmit={handleSubmit}>\n        <h1 className={`${styles.formTitle} text text_type_main-medium mb-6 `}>\n          Вход\n        </h1>\n        <div className={`${styles.formField} ${styles.formEmail} mb-6`}>\n          <Input\n            type={\"email\"}\n            placeholder={\"E-mail\"}\n            onChange={onChange}\n            value={form.email}\n            name={\"email\"}\n            error={false}\n            errorText={\"Ошибка\"}\n            size={\"default\"}\n          />\n        </div>\n        <div className={`${styles.formField} mb-6`}>\n          <PasswordInput\n            onChange={onChange}\n            value={form.password}\n            name={\"password\"}\n          />\n        </div>\n        {loginError && (\n          <p\n            className={`${styles.formErrorMsg} pt-2 pb-5 text text_type_main-small`}\n          >\n            {loginError}\n          </p>\n        )}\n        <div className={`${styles.formButton} mb-20`}>\n          <Button type=\"primary\" size=\"medium\">\n            Войти\n          </Button>\n        </div>\n        <p\n          className={`${styles.formLinkItem} text text_type_main-default text_color_inactive mb-4`}\n        >\n          Вы — новый пользователь?\n          <Link className={styles.formLink} to={\"/register\"}>\n            Зарегистрироваться\n          </Link>\n        </p>\n        <p\n          className={`${styles.formLinkItem} text text_type_main-default text_color_inactive`}\n        >\n          Забыли пароль?\n          <Link className={styles.formLink} to={\"/forgot-password\"}>\n            Восстановить пароль\n          </Link>\n        </p>\n      </form>\n    </div>\n  );\n};\n\nexport default LoginPage;\n","import React, { ChangeEvent, FormEvent, useState } from \"react\";\nimport styles from \"./page.module.css\";\nimport {\n  Button,\n  Input,\n  PasswordInput,\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport { Link } from \"react-router-dom\";\nimport { useDispatch } from \"../types/hooks\";\nimport { register } from \"../services/auth/actions\";\nimport { useSelector } from \"../types/hooks\";\nimport { getRegisterError } from \"../services/auth/selectors\";\n\nconst RegisterPage = () => {\n  const registerError = useSelector(getRegisterError);\n  const dispatch = useDispatch();\n  const [form, setValue] = useState({\n    name: \"\",\n    email: \"\",\n    password: \"\",\n  });\n  const onChange = (e: ChangeEvent<HTMLInputElement>) => {\n    setValue({ ...form, [e.target.name]: e.target.value });\n  };\n  const handleSubmit = (e: FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    dispatch(register(form));\n  };\n\n  return (\n    <div className={styles.wrap}>\n      <form className={styles.form} onSubmit={handleSubmit}>\n        <h1 className={`${styles.formTitle} text text_type_main-medium mb-6 `}>\n          Регистрация\n        </h1>\n        <div className={`${styles.formField} mb-6`}>\n          <Input\n            type={\"text\"}\n            placeholder={\"Имя\"}\n            onChange={onChange}\n            value={form.name}\n            name={\"name\"}\n            error={false}\n            errorText={\"Ошибка\"}\n            size={\"default\"}\n          />\n        </div>\n        <div className={`${styles.formField} ${styles.formEmail} mb-6`}>\n          <Input\n            type={\"email\"}\n            placeholder={\"E-mail\"}\n            onChange={onChange}\n            value={form.email}\n            name={\"email\"}\n            error={false}\n            errorText={\"Ошибка\"}\n            size={\"default\"}\n          />\n        </div>\n        <div className={`${styles.formField} mb-6`}>\n          <PasswordInput\n            onChange={onChange}\n            value={form.password}\n            name={\"password\"}\n          />\n        </div>\n        {registerError && (\n          <p\n            className=\"pt-2 pb-5 text text_type_main-small\"\n            style={{ textAlign: \"center\" }}\n          >\n            {registerError}\n          </p>\n        )}\n        <div className={`${styles.formButton} mb-20`}>\n          <Button type=\"primary\" size=\"medium\">\n            Зарегистрироваться\n          </Button>\n        </div>\n        <p\n          className={`${styles.formLinkItem} text text_type_main-default text_color_inactive mb-4`}\n        >\n          Уже зарегистрированы?\n          <Link className={styles.formLink} to={\"/login\"}>\n            Войти\n          </Link>\n        </p>\n      </form>\n    </div>\n  );\n};\n\nexport default RegisterPage;\n","import React, {\n  useEffect,\n  useRef,\n  useState,\n  ChangeEvent,\n  FormEvent,\n} from \"react\";\nimport styles from \"./page.module.css\";\nimport {\n  Button,\n  Input,\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"../types/hooks\";\nimport { forgotPassword } from \"../services/auth/actions\";\nimport { getForgotPassword } from \"../services/auth/selectors\";\n\nconst ForgotPasswordPage = () => {\n  const forgotPasswordObj = useSelector(getForgotPassword);\n  const dispatch = useDispatch();\n  const [form, setValue] = useState({\n    email: \"\",\n  });\n  const inputRef = useRef<HTMLInputElement>(null);\n  const handleSubmit = (e: FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    // @ts-ignore\n    dispatch(forgotPassword(form));\n  };\n  const onChange = (e: ChangeEvent<HTMLInputElement>) => {\n    setValue({ ...form, [e.target.name]: e.target.value });\n  };\n\n  useEffect(() => inputRef.current?.focus(), []);\n\n  if (forgotPasswordObj.emailSend) {\n    return (\n      <Redirect\n        to={{\n          pathname: \"/reset-password\",\n          state: { fromForgotPage: true },\n        }}\n      />\n    );\n  }\n\n  return (\n    <div className={styles.wrap}>\n      <form className={styles.form} onSubmit={handleSubmit}>\n        <h1 className={`${styles.formTitle} text text_type_main-medium mb-6 `}>\n          1. Восстановление пароля\n        </h1>\n        <div className={`${styles.formField} mb-6`}>\n          <Input\n            ref={inputRef}\n            type={\"email\"}\n            placeholder={\"Укажите e-mail\"}\n            onChange={onChange}\n            value={form.email}\n            name={\"email\"}\n            error={false}\n            errorText={\"Ошибка\"}\n            size={\"default\"}\n          />\n        </div>\n        {(forgotPasswordObj.emailSend || forgotPasswordObj.errorMessage) && (\n          <p\n            className={`${styles.formErrorMsg} pt-2 pb-5 text text_type_main-small`}\n          >\n            {forgotPasswordObj.message || forgotPasswordObj.errorMessage}\n          </p>\n        )}\n        {form.email && (\n          <div className={`${styles.formButton} mb-20`}>\n            <Button type=\"primary\" size=\"medium\">\n              Восстановить\n            </Button>\n          </div>\n        )}\n\n        <p\n          className={`${styles.formLinkItem} text text_type_main-default text_color_inactive mb-4`}\n        >\n          Вспомнили пароль?\n          <Link className={styles.formLink} to={\"/login\"}>\n            Войти\n          </Link>\n        </p>\n      </form>\n    </div>\n  );\n};\n\nexport default ForgotPasswordPage;\n","import React, { useState, ChangeEvent, FormEvent } from \"react\";\nimport styles from \"./page.module.css\";\nimport {\n  Button,\n  Input,\n  PasswordInput,\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport { Link, useHistory, Redirect } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"../types/hooks\";\nimport { getForgotPassword } from \"../services/auth/selectors\";\nimport { forgotPassword } from \"../services/auth/actions\";\n\ntype TLocationState = {\n  fromForgotPage: boolean;\n};\nconst ResetPasswordPage = () => {\n  const forgotPasswordObj = useSelector(getForgotPassword);\n  const history = useHistory<TLocationState>();\n  const dispatch = useDispatch();\n  const [form, setValue] = useState({\n    password: \"\",\n    token: \"\",\n  });\n  const onChange = (e: ChangeEvent<HTMLInputElement>) => {\n    setValue({ ...form, [e.target.name]: e.target.value });\n  };\n  const handleSubmit = (e: FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    // @ts-ignore\n    dispatch(forgotPassword(form));\n  };\n\n  const fromForgotPage = history.location.state?.fromForgotPage;\n  if (!fromForgotPage) {\n    return <Redirect to={{ pathname: \"/forgot-password\" }} />;\n  }\n\n  return (\n    <div className={styles.wrap}>\n      <form className={styles.form} onSubmit={handleSubmit}>\n        <h1 className={`${styles.formTitle} text text_type_main-medium mb-6 `}>\n          2. Восстановление пароля\n        </h1>\n        <div\n          className={`${styles.formField} ${styles.formFieldNewPassword} mb-6`}\n        >\n          <PasswordInput\n            onChange={onChange}\n            value={form.password}\n            name={\"password\"}\n          />\n        </div>\n        <div className={`${styles.formField} mb-6`}>\n          <Input\n            type={\"text\"}\n            placeholder={\"Введите код из письма\"}\n            onChange={onChange}\n            value={form.token}\n            name={\"token\"}\n            error={false}\n            errorText={\"Ошибка\"}\n            size={\"default\"}\n          />\n        </div>\n        {(forgotPasswordObj.errorMessage || forgotPasswordObj.message) && (\n          <p\n            className={`${styles.formErrorMsg} pt-2 pb-5 text text_type_main-small`}\n          >\n            {forgotPasswordObj.errorMessage || forgotPasswordObj.message}\n          </p>\n        )}\n        {form.password && form.token && (\n          <div className={`${styles.formButton} mb-20`}>\n            <Button type=\"primary\" size=\"medium\">\n              Сохранить\n            </Button>\n          </div>\n        )}\n        <p\n          className={`${styles.formLinkItem} text text_type_main-default text_color_inactive mb-4`}\n        >\n          Вспомнили пароль?\n          <Link className={styles.formLink} to={\"/login\"}>\n            Войти\n          </Link>\n        </p>\n      </form>\n    </div>\n  );\n};\n\nexport default ResetPasswordPage;\n","import React, { MouseEvent } from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport { signOut } from \"../../services/auth/actions\";\nimport { useDispatch } from \"../../types/hooks\";\nimport styles from \"./profile-sidebar.module.css\";\n\nconst ProfileSidebar = () => {\n  const dispatch = useDispatch();\n  const logoutHandler = (e: MouseEvent<HTMLButtonElement>) => {\n    e.preventDefault();\n    dispatch(signOut());\n  };\n  return (\n    <aside className={`${styles.profileSidebar}  mr-15`}>\n      <ul className={`${styles.sidebar} mb-20`}>\n        <li className={`${styles.sidebarItem}`}>\n          <NavLink\n            exact={true}\n            to={\"/profile\"}\n            className={`${styles.sidebarLink} text text_type_main-medium text_color_inactive`}\n            activeClassName={`${styles.sidebarLinkCurrent}`}\n          >\n            Профиль\n          </NavLink>\n        </li>\n        <li className={`${styles.sidebarItem}`}>\n          <NavLink\n            exact={true}\n            to=\"/profile/orders\"\n            className={`${styles.sidebarLink} text text_type_main-medium text_color_inactive`}\n            activeClassName={`${styles.sidebarLinkCurrent}`}\n          >\n            История заказов\n          </NavLink>\n        </li>\n        <li className={`${styles.sidebarItem}`}>\n          <button\n            onClick={logoutHandler}\n            className={`${styles.sidebarLink} reset-btn text text_type_main-medium text_color_inactive`}\n          >\n            Выход\n          </button>\n        </li>\n      </ul>\n      <p\n        className={`${styles.sidebarSubText} text text_type_main-default text_color_inactive`}\n      >\n        В этом разделе вы можете <br /> изменить свои персональные данные\n      </p>\n    </aside>\n  );\n};\n\nexport default ProfileSidebar;\n","export const NAME: \"currentUser\" = \"currentUser\";\n\nexport const UPDATE_USER_DATA: \"UPDATE_USER_DATA\" = `UPDATE_USER_DATA`;\nexport const UPDATE_USER_DATA_SEND: \"UPDATE_USER_DATA_SEND\" = `UPDATE_USER_DATA_SEND`;\nexport const UPDATE_USER_DATA_ERROR: \"UPDATE_USER_DATA_ERROR\" = `UPDATE_USER_DATA_ERROR`;\n","import { NAME } from \"./constants\";\nimport { RootState } from \"../../types\";\n\nexport const getUpdatedUser = (store: RootState) => store[NAME].data;\nexport const getUserUpdateSending = (store: RootState) =>\n  store[NAME].userUpdateSending;\nexport const getUserUpdateError = (store: RootState) =>\n  store[NAME].userUpdateError;\n","import {\n  UPDATE_USER_DATA,\n  UPDATE_USER_DATA_SEND,\n  UPDATE_USER_DATA_ERROR,\n} from \"./constants\";\nimport { TUser } from \"../../types/data\";\n\nexport interface IUpdateUserRequest {\n  readonly type: typeof UPDATE_USER_DATA;\n  payload: boolean;\n}\nexport interface IUpdateUserData {\n  readonly type: typeof UPDATE_USER_DATA_SEND;\n  payload: {\n    success: boolean;\n    user: TUser;\n  };\n}\n\nexport interface IUpdateUserError {\n  readonly type: typeof UPDATE_USER_DATA_ERROR;\n  payload: boolean;\n}\nexport type TUserUnion =\n  | IUpdateUserRequest\n  | IUpdateUserData\n  | IUpdateUserError;\n\nexport const updateUserRequestAction = (\n  payload: boolean\n): IUpdateUserRequest => ({\n  type: UPDATE_USER_DATA,\n  payload,\n});\nexport const updateUserSuccessAction = (payload: {\n  success: boolean;\n  user: TUser;\n}): IUpdateUserData => ({\n  type: UPDATE_USER_DATA_SEND,\n  payload,\n});\nexport const updateUserErrorAction = (payload: boolean): IUpdateUserError => ({\n  type: UPDATE_USER_DATA_ERROR,\n  payload,\n});\n","import React, { useState, SyntheticEvent, ChangeEvent } from \"react\";\nimport styles from \"../page.module.css\";\nimport stylesProfile from \"./profile-form.module.css\";\nimport {\n  Button,\n  Input,\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport { useDispatch, useSelector } from \"../../types/hooks\";\nimport { getUser } from \"../../services/auth/selectors\";\nimport {\n  getUpdatedUser,\n  getUserUpdateError,\n  getUserUpdateSending,\n} from \"../../services/user/selectors\";\nimport { updateUser } from \"../../services/user/actions\";\nimport { TUser } from \"../../types/data\";\n\nconst ProfileEdit = () => {\n  const dispatch = useDispatch();\n  const user = useSelector(getUser);\n  const updatedUser = useSelector(getUpdatedUser);\n  const userUpdateSending = useSelector(getUserUpdateSending);\n  const userUpdateError = useSelector(getUserUpdateError);\n\n  const [form, setValue] = useState<TUser>({\n    name: updatedUser?.user?.name || user?.name || \"\",\n    email: updatedUser?.user?.email || user?.email || \"\",\n    password: \"\",\n  });\n  const onChange = (e: ChangeEvent<HTMLInputElement>) => {\n    setValue({ ...form, [e.target.name]: e.target.value });\n  };\n  const handleSubmit = (e: SyntheticEvent) => {\n    e.preventDefault();\n    dispatch(updateUser(form));\n  };\n\n  const handleCancel = (e: SyntheticEvent) => {\n    e.preventDefault();\n\n    if (user) {\n      setValue({ ...user, password: \"\" });\n    }\n  };\n\n  return (\n    <div className={`${styles.wrap} ${stylesProfile.profileWrap}`}>\n      <form className={styles.form} onSubmit={handleSubmit}>\n        <div className={`${styles.formField} mb-6`}>\n          <Input\n            type={\"text\"}\n            placeholder={\"Имя\"}\n            onChange={onChange}\n            value={form.name}\n            name={\"name\"}\n            icon={\"EditIcon\"}\n            error={false}\n            errorText={\"Ошибка\"}\n            size={\"default\"}\n          />\n        </div>\n        <div className={`${styles.formField} mb-6`}>\n          <Input\n            type={\"email\"}\n            placeholder={\"Логин\"}\n            onChange={onChange}\n            value={form.email}\n            name={\"email\"}\n            icon={\"EditIcon\"}\n            error={false}\n            errorText={\"Ошибка\"}\n            size={\"default\"}\n          />\n        </div>\n        <div className={`${styles.formField} mb-6`}>\n          <Input\n            type={\"password\"}\n            placeholder={\"Пароль\"}\n            onChange={onChange}\n            value={form.password}\n            name={\"password\"}\n            icon={\"EditIcon\"}\n            error={false}\n            errorText={\"Ошибка\"}\n            size={\"default\"}\n          />\n        </div>\n        {!userUpdateSending &&\n          !userUpdateError &&\n          updatedUser &&\n          updatedUser.status && (\n            <p\n              className=\"pt-2 pb-5 text text_type_main-small\"\n              style={{ textAlign: \"center\" }}\n            >\n              Пользователь успешно обновлён\n            </p>\n          )}\n        <div className={`${styles.formButtonsContainer}`}>\n          <button\n            type={\"reset\"}\n            onClick={handleCancel}\n            className={`${styles.formResetBtn} reset-btn text text_type_main-default mr-5`}\n          >\n            Отмена\n          </button>\n          <Button type=\"primary\" size=\"medium\">\n            Сохранить\n          </Button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default ProfileEdit;\n","import { Location } from \"history\";\nimport { TInitialStateAuth } from \"../services/auth/reducer\";\nimport { TInitialStateConstructor } from \"../services/constructor/reducer\";\nimport { TInitialStateIngredients } from \"../services/ingredients/reducer\";\nimport { TInitialStateOrder } from \"../services/order/reducer\";\nimport { TInitialStateUser } from \"../services/user/reducer\";\n\nexport type TProduct = {\n  _id: string;\n  uuid?: string;\n  type: string;\n  price: number;\n  name: string;\n  image: string;\n  image_large: string;\n  image_mobile: string;\n  proteins: number;\n  fat: number;\n  calories: number;\n  carbohydrates: number;\n};\n\nexport type TLocationState = {\n  background: Location;\n  orderModal: any;\n};\n\nexport enum EStatus {\n  Done = \"done\",\n  Created = \"created\",\n  Pending = \"pending\",\n}\nexport type TOrderCreated = {\n  name: string;\n  order: { number: number };\n  success: boolean;\n};\nexport type TOrderInfo = {\n  ingredients: string[];\n  _id: string;\n  status: EStatus;\n  number: number;\n  createdAt: string;\n  updatedAt: string;\n  name: string;\n};\nexport type TUser = {\n  name: string;\n  email: string;\n  password: string;\n};\n\nexport type TInitialState =\n  | TInitialStateAuth\n  | TInitialStateConstructor\n  | TInitialStateIngredients\n  | TInitialStateOrder\n  | TInitialStateUser;\n","import { SERVER_URL } from \"../../utils/constants\";\nimport { getCookie } from \"../../utils/cookie\";\nimport { fetchWithRefresh } from \"../../utils/auth-api\";\nimport {\n  updateUserErrorAction,\n  updateUserRequestAction,\n  updateUserSuccessAction,\n} from \"./actions-type\";\nimport { AppDispatch } from \"../../types\";\nimport { TUser } from \"../../types/data\";\n\nexport function updateUser({ name, password, email }: TUser) {\n  return async function (dispatch: AppDispatch) {\n    dispatch(updateUserRequestAction(true));\n    const token = localStorage.getItem(\"refreshToken\");\n    if (token) {\n      return fetchWithRefresh(`${SERVER_URL}/auth/user`, {\n        method: \"PATCH\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${getCookie(\"accessToken\")}`,\n        },\n        body: JSON.stringify({ name, email, password }),\n      }).then((res) => {\n        const { user, success } = res;\n\n        dispatch(updateUserSuccessAction({ success, user }));\n        dispatch(updateUserRequestAction(false));\n      });\n    } else {\n      dispatch(updateUserErrorAction(false));\n      return Promise.resolve();\n    }\n  };\n}\n","export const NAME: \"orders\" = \"orders\";\n\nexport const WS_CONNECTION_START: \"WS_CONNECTION_START\" = \"WS_CONNECTION_START\";\nexport const WS_CONNECTION_SUCCESS: \"WS_CONNECTION_SUCCESS\" =\n  \"WS_CONNECTION_SUCCESS\";\nexport const WS_CONNECTION_ERROR: \"WS_CONNECTION_ERROR\" = \"WS_CONNECTION_ERROR\";\nexport const WS_CONNECTION_CLOSED: \"WS_CONNECTION_CLOSED\" =\n  \"WS_CONNECTION_CLOSED\";\nexport const WS_GET_MESSAGE: \"WS_GET_MESSAGE\" = \"WS_GET_MESSAGE\";\n","import { NAME } from \"./constants\";\nimport { RootState } from \"../../types\";\n\nexport const getWsConnected = (store: RootState) => {\n  return store[NAME];\n};\nexport const getWsMessages = (store: any) => {\n  return store[NAME].messages;\n};\n","import { TProduct } from \"../types/data\";\n\nexport const getTotalOrderSum = (\n  orderIngredients: string[],\n  ingredients: TProduct[]\n) => {\n  return orderIngredients.reduce((acc, current) => {\n    const product = ingredients.find((el) => el._id === current);\n    if (product) {\n      const { price, type } = product;\n      acc += type === \"bun\" ? price * 2 : price;\n    }\n\n    return acc;\n  }, 0);\n};\n","import { EStatus } from \"../types/data\";\nexport const formatStatusOrder = (status: EStatus) => {\n  switch (status) {\n    case EStatus.Created: {\n      return \"Создан\";\n    }\n    case EStatus.Done: {\n      return \"Готово\";\n    }\n    case EStatus.Pending: {\n      return \"Готовится\";\n    }\n    default: {\n      return \"\";\n    }\n  }\n};\n","import dayjs from \"dayjs\";\nimport \"dayjs/locale/ru\";\n\nimport relativeTime from \"dayjs/plugin/relativeTime\";\nimport isToday from \"dayjs/plugin/isToday\";\nimport isYesterday from \"dayjs/plugin/isYesterday\";\ndayjs.locale(\"ru\");\ndayjs.extend(relativeTime);\ndayjs.extend(isToday);\ndayjs.extend(isYesterday);\n\nexport function getFormattedDate(d: string, ordNumb = 0) {\n  // console.log(ordNumb, d, dayjs(d).isYesterday());\n  if (dayjs(d).isToday()) {\n    return `Сегодня, ${dayjs(d).format(\"HH:mm UTCZ\")}`;\n  }\n\n  if (dayjs(d).isYesterday()) {\n    return `Вчера, ${dayjs(d).format(\"HH:mm UTCZ\")}`;\n  }\n\n  return `${dayjs(d).fromNow()}`;\n}\n","import React, { FC, useState } from \"react\";\nimport stylesOrderList from \"./order-list.module.css\";\nimport { CurrencyIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport styles from \"../burger-ingredients/burger-ingredients.module.css\";\nimport { useLocation, Link } from \"react-router-dom\";\nimport { TOrderInfo } from \"../../types/data\";\nimport { useSelector } from \"../../types/hooks\";\nimport { getIngredients } from \"../../services/ingredients/selectors\";\nimport { getTotalOrderSum } from \"../../utils/getTotalSum\";\nimport { formatStatusOrder } from \"../../utils/formatStatusOrder\";\nimport { getFormattedDate } from \"../../utils/formateDate\";\n\ntype TOrderList = {\n  className?: string;\n  path: string;\n  orders: TOrderInfo[];\n  withOrderStatus?: boolean;\n};\nconst OrderList: FC<TOrderList> = ({\n  className = \"\",\n  path = \"\",\n  orders,\n  withOrderStatus = false,\n}) => {\n  const ingredients = useSelector(getIngredients);\n  const [orderStatus] = useState(true);\n  const location = useLocation();\n  if (!ingredients || !orders) {\n    return null;\n  }\n\n  return (\n    <ul\n      className={`${stylesOrderList.orderList} ${className} custom-scroll pr-2`}\n    >\n      {orders.map((order) => (\n        <li\n          className={`${stylesOrderList.orderItem} pt-6 pr-6 pb-6 pl-6`}\n          key={order._id}\n        >\n          <Link\n            className={`${styles.ListItemLink}`}\n            to={{\n              pathname: path ? `/${path}/${order._id}` : \"\",\n              // This is the trick! This link sets\n              // the `background` in location state.\n              state: {\n                background: location,\n                orderModal: {\n                  order,\n                  totalOrderSum: getTotalOrderSum(\n                    order.ingredients,\n                    ingredients\n                  ),\n                  orderDate: order.createdAt,\n                },\n              },\n            }}\n          >\n            <div className={`${stylesOrderList.orderItemHeader} mb-6`}>\n              <span className={`text text_type_digits-default`}>\n                #{order.number}\n              </span>\n              <span\n                className={`text text_type_main-default text_color_inactive`}\n              >\n                {getFormattedDate(order.createdAt, order.number)}\n              </span>\n            </div>\n            <h2 className={`text text_type_main-medium mb-6`}>{order.name}</h2>\n            {withOrderStatus && orderStatus && (\n              <p\n                className={`${stylesOrderList.orderStatus} text text_type_main-default mt-2 mb-6`}\n              >\n                {formatStatusOrder(order.status)}\n              </p>\n            )}\n            <div className={`${stylesOrderList.orderItemInfo}`}>\n              <ul className={`${stylesOrderList.ingredientsList}`}>\n                {order.ingredients.map((productId, index, array) => {\n                  const currentProduct = ingredients.find(\n                    (el) => el._id === productId\n                  );\n\n                  if (index < 6) {\n                    return (\n                      <li\n                        className={`${stylesOrderList.ingredientsListItem}`}\n                        key={index}\n                      >\n                        {currentProduct ? (\n                          <img\n                            src={currentProduct.image}\n                            alt={currentProduct.name}\n                          />\n                        ) : null}\n\n                        {index === 5 && array.length > 6 ? (\n                          <span\n                            className={`${stylesOrderList.ingredientsListItemCount} text text_type_main-default`}\n                          >\n                            +{array.length - (index + 1)}\n                          </span>\n                        ) : null}\n                      </li>\n                    );\n                  }\n                  return null;\n                })}\n              </ul>\n              <span className={`${stylesOrderList.orderItemPrice} ml-6`}>\n                <span\n                  className={`${stylesOrderList.orderItemPriceNum} text text_type_digits-default`}\n                >\n                  {getTotalOrderSum(order.ingredients, ingredients)}\n                </span>\n                <CurrencyIcon type=\"primary\" />\n              </span>\n            </div>\n          </Link>\n        </li>\n      ))}\n    </ul>\n  );\n};\n\nexport default OrderList;\n","import React, { useEffect, useState } from \"react\";\nimport {\n  WS_CONNECTION_CLOSED,\n  WS_CONNECTION_START,\n} from \"../../services/websoket/constants\";\nimport { useDispatch, useSelector } from \"../../types/hooks\";\nimport { getWsMessages } from \"../../services/websoket/selectors\";\nimport { TOrderInfo } from \"../../types/data\";\nimport OrderList from \"../../components/order-list/order-list\";\nimport styles from \"./profile.module.css\";\nimport Preloader from \"../../components/preloader/preloader\";\n\nconst ProfileOrders = () => {\n  const message = useSelector(getWsMessages);\n  const dispatch = useDispatch();\n  const [orders, setOrders] = useState<TOrderInfo[]>([]);\n\n  useEffect(() => {\n    dispatch({ type: WS_CONNECTION_START, withToken: true });\n    return () => {\n      dispatch({ type: WS_CONNECTION_CLOSED });\n    };\n  }, [dispatch]);\n\n  useEffect(() => {\n    if (message) {\n      console.log(message.orders);\n      setOrders(message.orders);\n    }\n  }, [message]);\n\n  if (!orders.length) {\n    return <Preloader />;\n  }\n  return (\n    <OrderList\n      className={styles.profileOrders}\n      path={\"profile/orders\"}\n      orders={orders}\n      withOrderStatus\n    />\n  );\n};\n\nexport default ProfileOrders;\n","import React, { FC, useEffect, useState } from \"react\";\nimport styles from \"./order-info.module.css\";\nimport { CurrencyIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport { TOrderInfo } from \"../../types/data\";\nimport { useDispatch, useSelector } from \"../../types/hooks\";\nimport { getIngredients } from \"../../services/ingredients/selectors\";\nimport { formatStatusOrder } from \"../../utils/formatStatusOrder\";\nimport {\n  WS_CONNECTION_CLOSED,\n  WS_CONNECTION_START,\n} from \"../../services/websoket/constants\";\nimport { getWsMessages } from \"../../services/websoket/selectors\";\nimport { useParams } from \"react-router-dom\";\nimport { getTotalOrderSum } from \"../../utils/getTotalSum\";\nimport { getFormattedDate } from \"../../utils/formateDate\";\n\ntype TOrderModalInfo = {\n  isModal?: boolean;\n  orderModal?: {\n    order: TOrderInfo;\n    totalOrderSum: number;\n    orderDate: string;\n  };\n};\nconst OrderModalInfo: FC<TOrderModalInfo> = ({\n  isModal = false,\n  orderModal,\n}) => {\n  const [orderFull, setOrderFull] = useState(orderModal);\n  const { id } = useParams<{ id: string }>();\n  const ingredients = useSelector(getIngredients);\n  const message = useSelector(getWsMessages);\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    if (!orderModal) {\n      dispatch({ type: WS_CONNECTION_START, withToken: false });\n    }\n\n    return () => {\n      if (!orderModal) {\n        dispatch({ type: WS_CONNECTION_CLOSED });\n      }\n    };\n  }, [dispatch, orderModal]);\n\n  useEffect(() => {\n    if (message) {\n      const foundOrder: TOrderInfo = message.orders.find(\n        (order: TOrderInfo) => order._id === id\n      );\n      if (foundOrder) {\n        setOrderFull({\n          order: foundOrder,\n          orderDate: foundOrder.createdAt,\n          totalOrderSum: getTotalOrderSum(foundOrder.ingredients, ingredients),\n        });\n      }\n    }\n  }, [message, id, ingredients]);\n\n  if (!orderFull || !ingredients) {\n    return null;\n  }\n\n  const { order } = orderFull;\n\n  interface IOrderListObj {\n    [prop: string]: number;\n  }\n  const orderListObj: IOrderListObj = order.ingredients.reduce(\n    (acc: IOrderListObj, current) => {\n      if (acc[current]) {\n        acc[current] += 1;\n      } else {\n        acc[current] = 1;\n      }\n      return acc;\n    },\n    {}\n  );\n  return (\n    <div className={styles.orderWrap}>\n      <p\n        className={`${styles.orderNum} ${\n          isModal ? styles.left : \"\"\n        } text text_type_digits-default mb-10`}\n      >\n        #{order.number}\n      </p>\n      <h2 className={`${styles.orderName} text text_type_main-medium mb-3`}>\n        {order.name}\n      </h2>\n      <p className={`${styles.orderStatus} text text_type_main-default mb-15`}>\n        {formatStatusOrder(order.status)}\n      </p>\n      <p className={`text text_type_main-medium mb-6`}>Состав:</p>\n      <ul className={`${styles.orderList} custom-scroll mb-10 pr-6`}>\n        {Object.entries(orderListObj).map(([productId, productCount]) => {\n          const currentProduct = ingredients.find((el) => el._id === productId);\n\n          if (!currentProduct) {\n            return null;\n          }\n          if (currentProduct.type === \"bun\") {\n            productCount *= 2;\n          }\n          return (\n            <li className={`${styles.orderListItem} mb-4`} key={productId}>\n              <div className={`${styles.itemImg} mr-4`}>\n                {currentProduct ? (\n                  <img src={currentProduct.image} alt={currentProduct.name} />\n                ) : null}\n              </div>\n              <span\n                className={`${styles.itemName} text text_type_main-default mr-4`}\n              >\n                {order.name}\n              </span>\n              <div className={`${styles.itemTotal}`}>\n                <span\n                  className={`${styles.itemCount} text text_type_digits-default`}\n                >\n                  {productCount}\n                </span>\n                <span className=\"text text_type_digits-default\">x</span>\n                <span\n                  className={`${styles.itemPrice} text text_type_digits-default`}\n                >\n                  {currentProduct.price}\n                </span>\n                <CurrencyIcon type=\"primary\" />\n              </div>\n            </li>\n          );\n        })}\n      </ul>\n      <div className={styles.orderFooter}>\n        <div\n          className={`${styles.orderTime} text text_type_main-default text_color_inactive`}\n        >\n          {getFormattedDate(orderFull.orderDate)}\n        </div>\n        <div className={styles.orderTotal}>\n          <span\n            className={`${styles.orderTotalPrice} text text_type_digits-default`}\n          >\n            {orderFull.totalOrderSum}\n          </span>\n          <CurrencyIcon type=\"primary\" />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default OrderModalInfo;\n","import React from \"react\";\nimport styles from \"./profile.module.css\";\nimport {\n  Route,\n  Switch,\n  useHistory,\n  useLocation,\n  useRouteMatch,\n} from \"react-router-dom\";\nimport ProfileSidebar from \"./profile-sidebar\";\nimport ProfileEdit from \"./profile-edit\";\nimport ProfileOrders from \"./profile-orders\";\nimport OrderInfo from \"../../components/order-modal-info/order-modal-info\";\nimport Modal from \"../../components/modal/modal\";\nimport { TLocationState } from \"../../types/data\";\n\nconst ProfilePage = () => {\n  const { path } = useRouteMatch();\n  const history = useHistory();\n  const location = useLocation<TLocationState>();\n  const action = history.action === \"PUSH\" || history.action === \"REPLACE\";\n  const modalOrderOpen = action && location.state && location.state.background;\n\n  return (\n    <>\n      <div className={styles.profileContainer}>\n        <Switch location={modalOrderOpen || location}>\n          <Route path={`${path}`} exact>\n            <ProfileSidebar />\n            <ProfileEdit />\n          </Route>\n          <Route path={`${path}/orders/`} exact>\n            <ProfileSidebar />\n            <ProfileOrders />\n          </Route>\n          <Route path={`${path}/orders/:id`} exact>\n            <OrderInfo />\n          </Route>\n        </Switch>\n      </div>\n      {modalOrderOpen && (\n        <Route path=\"/orders/:id\">\n          <Modal visible={!!modalOrderOpen} setFunc={history.goBack}>\n            <OrderInfo isModal />\n          </Modal>\n        </Route>\n      )}\n    </>\n  );\n};\n\nexport default ProfilePage;\n","import React from \"react\";\nimport styles from \"./page.module.css\";\nimport { Link } from \"react-router-dom\";\n\nconst ErrorPage404 = () => {\n  return (\n    <div className={styles.wrap} style={{ textAlign: \"center\" }}>\n      <h1 className=\"text text_type_digits-large mb-6\">404</h1>\n      <p className=\"text text_type_main-default mb-6\">Страница не найдена</p>\n      <Link\n        className=\"text text_type_main-default text_color_inactive\"\n        to={\"/\"}\n      >\n        На главную\n      </Link>\n    </div>\n  );\n};\n\nexport default ErrorPage404;\n","import React, { useEffect, useState } from \"react\";\nimport styles from \"./feed.module.css\";\nimport OrderList from \"../../components/order-list/order-list\";\nimport { useSelector, useDispatch } from \"../../types/hooks\";\nimport { EStatus, TOrderInfo } from \"../../types/data\";\nimport {\n  WS_CONNECTION_START,\n  WS_CONNECTION_CLOSED,\n} from \"../../services/websoket/constants\";\nimport { getWsMessages } from \"../../services/websoket/selectors\";\nimport Preloader from \"../../components/preloader/preloader\";\n\nconst FeedPage = () => {\n  const message = useSelector(getWsMessages);\n  const [orders, setOrders] = useState<TOrderInfo[]>([]);\n  const [total, setTotal] = useState(0);\n  const [totalDay, setTotalDay] = useState(0);\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch({ type: WS_CONNECTION_START, withToken: false });\n    return () => {\n      dispatch({ type: WS_CONNECTION_CLOSED });\n    };\n  }, [dispatch]);\n\n  useEffect(() => {\n    if (message) {\n      console.log(message.orders);\n      setOrders(message.orders);\n      setTotal(message.total);\n      setTotalDay(message.totalToday);\n    }\n  }, [message]);\n  const ordersDone = orders\n    .filter((order) => order.status === EStatus.Done)\n    .slice(0, 6);\n  const ordersPending = orders\n    .filter((order) => order.status === EStatus.Pending)\n    .slice(0, 6);\n\n  if (!orders.length) {\n    return <Preloader />;\n  }\n  return (\n    <div className={styles.feedPage}>\n      <h1 className=\"text text_type_main-large mb-5\">Лента заказов</h1>\n      <div className={styles.feedPageContainer}>\n        <div className={`${styles.feedPageCol} mr-15`}>\n          <OrderList className={styles.orderList} path=\"feed\" orders={orders} />\n        </div>\n        <div className={styles.feedPageCol}>\n          <div className={`${styles.orders} mb-15`}>\n            {ordersDone.length ? (\n              <div className={`${styles.orderCol} mr-9`}>\n                <span\n                  className={`${styles.orderColTitle} text text_type_main-medium mb-6`}\n                >\n                  Готовы\n                </span>\n                <ul className={`${styles.orderColList}`}>\n                  {ordersDone.map((order) => (\n                    <li\n                      className={`${styles.orderColListItem} ${styles.ready} text text_type_digits-default mb-2`}\n                      key={order._id}\n                    >\n                      {order.number}\n                    </li>\n                  ))}\n                </ul>\n              </div>\n            ) : null}\n            {ordersPending.length ? (\n              <div className={`${styles.orderCol}`}>\n                <span\n                  className={`${styles.orderColTitle} text text_type_main-medium mb-6`}\n                >\n                  В работе\n                </span>\n                <ul className={`${styles.orderColList}`}>\n                  {ordersPending.map((order) => (\n                    <li\n                      className={`${styles.orderColListItem} text text_type_digits-default mb-2`}\n                      key={order._id}\n                    >\n                      {order.number}\n                    </li>\n                  ))}\n                </ul>\n              </div>\n            ) : null}\n          </div>\n\n          <div className=\"mb-15\">\n            <span className=\"text text_type_main-medium\">\n              Выполнено за все время:\n            </span>\n            <span\n              className={`${styles.totalBlockNum} text text_type_digits-large`}\n            >\n              {total}\n            </span>\n          </div>\n\n          <div className=\"mb-15\">\n            <span className=\"text text_type_main-medium\">\n              Выполнено за сегодня:\n            </span>\n            <span\n              className={`${styles.totalBlockNum} text text_type_digits-large`}\n            >\n              {totalDay}\n            </span>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default FeedPage;\n","import React, { FC } from \"react\";\nimport { Redirect, Route } from \"react-router-dom\";\nimport { useSelector } from \"../types/hooks\";\nimport { getIsAuthChecking, getUser } from \"../services/auth/selectors\";\nimport Preloader from \"./preloader/preloader\";\n\ntype TProtectedRoute = {\n  path: string;\n  exact?: boolean;\n};\nconst ProtectedRoute: FC<TProtectedRoute> = ({\n  children,\n  path,\n  exact = false,\n}) => {\n  const user = useSelector(getUser);\n  const isAuthChecking = useSelector(getIsAuthChecking);\n\n  return (\n    <Route\n      exact={exact}\n      path={path}\n      render={({ location }) =>\n        isAuthChecking ? (\n          <Preloader />\n        ) : user ? (\n          children\n        ) : (\n          <Redirect\n            to={{\n              pathname: \"/login\",\n              state: { from: location },\n            }}\n          />\n        )\n      }\n    />\n  );\n};\n// ProtectedRoute.propTypes = {\n//   path: PropTypes.string.isRequired,\n//   children: PropTypes.element.isRequired,\n//   exact: PropTypes.bool,\n//   isAuthChecking: PropTypes.bool,\n// };\n\nexport default ProtectedRoute;\n","import React, { FC } from \"react\";\nimport styles from \"./ingredient-details.module.css\";\nimport { Button } from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport { useDispatch, useSelector } from \"../../types/hooks\";\nimport { useParams } from \"react-router-dom\";\nimport { getIngredients } from \"../../services/ingredients/selectors\";\nimport Preloader from \"../preloader/preloader\";\nimport { TProduct } from \"../../types/data\";\nimport {\n  addBunAction,\n  addIngredientAction,\n} from \"../../services/constructor/action-type\";\n\ntype TIngredientDetails = {\n  setFunc?: () => void;\n  withAddButton?: boolean;\n};\n\nconst IngredientDetails: FC<TIngredientDetails> = ({\n  setFunc = () => {},\n  withAddButton = false,\n}) => {\n  const dispatch = useDispatch();\n  const { id } = useParams<{ id?: string }>();\n  const ingredients = useSelector(getIngredients);\n  const product = ingredients.find((product: TProduct) => product._id === id);\n\n  interface IStatProductMap {\n    [propertyName: string]: string;\n  }\n  const statProductMap: IStatProductMap = {\n    calories: \"Калории,ккал\",\n    proteins: \"Белки,г\",\n    fat: \"Жиры,г\",\n    carbohydrates: \"Углеводы,г\",\n  };\n  const addOnOrderHandler = () => {\n    if (product) {\n      const productType = product.type;\n\n      if (productType === \"bun\") {\n        dispatch(addBunAction(product));\n      } else {\n        dispatch(addIngredientAction(product));\n      }\n    }\n    setFunc();\n  };\n\n  if (!product) {\n    return <Preloader />;\n  }\n  return (\n    <div className={`${styles.container}`}>\n      <div className={`${styles.ImgWrap} mb-4`}>\n        <img src={product.image_large} alt={product.name} />\n      </div>\n\n      <strong className={`mb-8 text text_type_main-medium`}>\n        {product.name}\n      </strong>\n\n      <ul className={`${styles.statList} mb-4`}>\n        {Object.entries(statProductMap).map(([type, name]) => (\n          <li className={`${styles.statItem} mr-5`} key={type}>\n            <span\n              className={`${styles.statName} text text_type_main-default text_color_inactive`}\n            >\n              {name}\n            </span>\n            <span\n              className={`text text_type_digits-default text_color_inactive`}\n            >\n              {product[type as keyof TProduct]}\n            </span>\n          </li>\n        ))}\n      </ul>\n      {withAddButton && (\n        <Button type=\"primary\" size=\"large\" onClick={addOnOrderHandler}>\n          Добавить в бургер\n        </Button>\n      )}\n    </div>\n  );\n};\n\nexport default IngredientDetails;\n","import React, { FC } from \"react\";\nimport { useSelector } from \"../types/hooks\";\nimport { getIsAuthChecking, getUser } from \"../services/auth/selectors\";\nimport { Redirect, Route, useLocation } from \"react-router-dom\";\nimport Preloader from \"./preloader/preloader\";\nimport { Location } from \"history\";\n\ntype TLocationState = {\n  from: Location;\n};\ntype TAuthProtectedRoute = {\n  path: string;\n  exact?: boolean;\n};\nconst AuthProtectedRoute: FC<TAuthProtectedRoute> = ({\n  children,\n  path,\n  exact = true,\n}) => {\n  const location = useLocation<TLocationState>();\n  const isAuthChecking = useSelector(getIsAuthChecking);\n  const user = useSelector(getUser);\n  const { from } = location.state || {\n    from: { pathname: \"/\" },\n  };\n  return (\n    <Route\n      exact={exact}\n      path={path}\n      render={() =>\n        isAuthChecking ? (\n          <Preloader />\n        ) : user ? (\n          <Redirect to={from} />\n        ) : (\n          children\n        )\n      }\n    />\n  );\n};\n\nexport default AuthProtectedRoute;\n","import React, { useEffect } from \"react\";\nimport appStyles from \"./app.module.css\";\nimport AppHeader from \"../app-header/app-header\";\nimport BurgerIngredients from \"../burger-ingredients/burger-ingredients\";\nimport BurgerConstructor from \"../burger-constructor/burger-constructor\";\nimport { useDispatch } from \"../../types/hooks\";\nimport { getItems } from \"../../services/ingredients/actions\";\nimport { Route, Switch, useHistory, useLocation } from \"react-router-dom\";\nimport {\n  LoginPage,\n  RegisterPage,\n  ProfilePage,\n  ResetPasswordPage,\n  ForgotPasswordPage,\n  ErrorPage404,\n  FeedPage,\n} from \"../../pages\";\nimport { checkAuth } from \"../../services/auth/actions\";\nimport ProtectedRoute from \"../protected-route\";\nimport IngredientDetails from \"../ingredient-details/ingredient-details\";\nimport AuthProtectedRoute from \"../auth-protected-route\";\nimport Modal from \"../modal/modal\";\nimport OrderInfo from \"../order-modal-info/order-modal-info\";\nimport { TLocationState } from \"../../types/data\";\n\nfunction App() {\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(getItems());\n    dispatch(checkAuth());\n  }, [dispatch]);\n\n  const history = useHistory();\n  const location = useLocation<TLocationState>();\n  const action = history.action === \"PUSH\" || history.action === \"REPLACE\";\n  const modalIngredientOpen =\n    action && location.state && location.state.background;\n  const modalOrderOpen =\n    action &&\n    location.state &&\n    location.state.background &&\n    location.state.orderModal;\n  return (\n    <>\n      <AppHeader />\n      <main className={`${appStyles.container} ${appStyles.flex}`}>\n        <Switch location={modalIngredientOpen || modalOrderOpen || location}>\n          <Route path=\"/\" exact={true}>\n            <BurgerIngredients />\n            <BurgerConstructor />\n          </Route>\n          <AuthProtectedRoute path=\"/login\">\n            <LoginPage />\n          </AuthProtectedRoute>\n          <AuthProtectedRoute path=\"/register\">\n            <RegisterPage />\n          </AuthProtectedRoute>\n          <AuthProtectedRoute path=\"/forgot-password\">\n            <ForgotPasswordPage />\n          </AuthProtectedRoute>\n          <AuthProtectedRoute path=\"/reset-password\">\n            <ResetPasswordPage />\n          </AuthProtectedRoute>\n          <Route path=\"/feed\" exact={true}>\n            <FeedPage />\n          </Route>\n          <Route path=\"/feed/:id\" exact={true}>\n            <OrderInfo />\n          </Route>\n          <ProtectedRoute path={\"/profile\"}>\n            <ProfilePage />\n          </ProtectedRoute>\n          <Route path=\"/ingredients/:id\" exact={true}>\n            <IngredientDetails />\n          </Route>\n          <Route>\n            <ErrorPage404 />\n          </Route>\n        </Switch>\n        {modalIngredientOpen && (\n          <Route path=\"/ingredients/:id\">\n            <Modal\n              visible={!!modalIngredientOpen}\n              setFunc={history.goBack}\n              headerTitle=\"Детали ингредиента\"\n            >\n              <IngredientDetails\n                setFunc={history.goBack}\n                withAddButton={true}\n              />\n            </Modal>\n          </Route>\n        )}\n        {modalOrderOpen && (\n          <>\n            <Route path=\"/feed/:id\">\n              <Modal\n                visible={!!modalOrderOpen}\n                setFunc={history.goBack}\n                withHeader={false}\n              >\n                <OrderInfo isModal orderModal={location.state.orderModal} />\n              </Modal>\n            </Route>\n            <Route path=\"/profile/orders/:id\">\n              <Modal\n                visible={!!modalOrderOpen}\n                setFunc={history.goBack}\n                withHeader={false}\n              >\n                <OrderInfo isModal orderModal={location.state.orderModal} />\n              </Modal>\n            </Route>\n          </>\n        )}\n      </main>\n    </>\n  );\n}\n\nexport default App;\n","import { Middleware } from \"redux\";\nimport { getCookie } from \"../../utils/cookie\";\nimport { TWsActions } from \"./action-type\";\n\nexport const socketMiddleware = (\n  wsUrl: string,\n  wsActions: typeof TWsActions\n): Middleware<{}> => {\n  return (store) => {\n    let socket: WebSocket | null = null;\n\n    return (next) => (action) => {\n      const { dispatch } = store;\n      const { type, withToken } = action;\n      const { wsInit, onOpen, onClose, onError, onMessage } = wsActions;\n      const accessCookie = getCookie(\"accessToken\");\n      const token = withToken ? accessCookie : \"\";\n\n      if (type === wsInit) {\n        socket = new WebSocket(\n          withToken ? `${wsUrl}?token=${token}` : `${wsUrl}/all`\n        );\n      }\n      if (socket) {\n        socket.onopen = (event) => {\n          dispatch({ type: onOpen, payload: event });\n        };\n\n        socket.onerror = (event) => {\n          dispatch({ type: onError, wsError: event });\n        };\n\n        socket.onmessage = (event) => {\n          const { data } = event;\n          const parsedData = JSON.parse(data);\n\n          dispatch({ type: onMessage, messages: parsedData });\n        };\n\n        socket.onclose = (event) => {\n          dispatch({ type: onClose, payload: event });\n        };\n      }\n\n      next(action);\n    };\n  };\n};\n","import { SERVER_URL } from \"../../utils/constants\";\nimport {\n  IngredientsSuccessAction,\n  IngredientsRequestAction,\n  IngredientsFailedAction,\n} from \"./action-types\";\nimport { AppDispatch } from \"../../types\";\n\nexport function getItems() {\n  return async function (dispatch: AppDispatch) {\n    dispatch(IngredientsRequestAction());\n    // Запрашиваем данные у сервера\n    try {\n      const res = await fetch(`${SERVER_URL}/ingredients`);\n      // @ts-ignore\n      const isJson =\n        // @ts-ignore\n        res.headers.get(\"content-type\").indexOf(\"application/json\") !== -1;\n      if (!res.ok) {\n        dispatch(IngredientsFailedAction());\n        throw new Error(\"Ответ сети не ok\");\n      }\n      if (!isJson) {\n        dispatch(IngredientsFailedAction());\n        throw new Error(\"Ответ сети не json\");\n      }\n      const { data } = await res.json();\n      dispatch(IngredientsSuccessAction(data));\n    } catch (error: any) {\n      console.log(error.message);\n      dispatch(IngredientsFailedAction());\n    }\n  };\n}\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { LOAD_ITEMS, LOAD_ITEMS_SUCCESS, LOAD_ITEMS_FAILED } from \"./constants\";\nimport { TProduct } from \"../../types/data\";\nimport { TIngredient } from \"./action-types\";\n\nexport type TInitialStateIngredients = {\n  ingredients: TProduct[] | [];\n  ingredientsRequest: boolean;\n  ingredientsFailed: boolean;\n};\nconst initialState: TInitialStateIngredients = {\n  ingredients: [],\n  ingredientsRequest: false,\n  ingredientsFailed: false,\n};\n\nexport const ingredientsReducer = (\n  state = initialState,\n  action: TIngredient\n): TInitialStateIngredients => {\n  switch (action.type) {\n    case LOAD_ITEMS_SUCCESS: {\n      return {\n        ...state,\n        ingredients: action.data,\n        ingredientsRequest: false,\n        ingredientsFailed: false,\n      };\n    }\n    case LOAD_ITEMS: {\n      return {\n        ...state,\n        ingredientsRequest: true,\n        ingredientsFailed: false,\n      };\n    }\n    case LOAD_ITEMS_FAILED: {\n      return {\n        ...state,\n        ingredientsRequest: false,\n        ingredientsFailed: true,\n      };\n    }\n    default: {\n      return state;\n    }\n  }\n};\n","import {\n  ADD_BUN,\n  ADD_INGREDIENT,\n  REMOVE_INGREDIENT,\n  RESET_CONSTRUCTOR,\n  UPDATE_CONSTRUCTOR,\n} from \"./constants\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport update from \"immutability-helper\";\nimport { TProduct } from \"../../types/data\";\nimport { TConstructor } from \"./action-type\";\n\nexport type TInitialStateConstructor = {\n  bun: TProduct | null;\n  ingredients: TProduct[];\n};\nconst initialState: TInitialStateConstructor = {\n  bun: null,\n  ingredients: [],\n};\n\nexport const constructorReducer = (\n  state = initialState,\n  action: TConstructor\n): TInitialStateConstructor => {\n  switch (action.type) {\n    case ADD_BUN: {\n      return {\n        ...state,\n        bun: { ...action.bun, uuid: uuidv4() },\n      };\n    }\n    case ADD_INGREDIENT: {\n      return {\n        ...state,\n        ingredients: [\n          ...state.ingredients,\n          { ...action.ingredient, uuid: uuidv4() },\n        ],\n      };\n    }\n    case REMOVE_INGREDIENT: {\n      const { _id } = action.ingredient;\n      let deleted = false;\n      return {\n        ...state,\n        ingredients: state.ingredients.filter(el => {\n          if (el._id === _id && !deleted) {\n            deleted = true;\n            return false;\n          }\n          return true;\n        }),\n      };\n    }\n    case RESET_CONSTRUCTOR: {\n      return {\n        bun: null,\n        ingredients: [],\n      };\n    }\n    case UPDATE_CONSTRUCTOR: {\n      const { dragIndex, hoverIndex } = action.value;\n      const dragCard = state.ingredients[dragIndex];\n      return {\n        ...state,\n        ingredients: update(state.ingredients, {\n          $splice: [\n            [dragIndex, 1],\n            [hoverIndex, 0, dragCard],\n          ],\n        }),\n      };\n    }\n    default: {\n      return state;\n    }\n  }\n};\n","import {\n  CREATE_ORDER_SUCCESS,\n  CREATE_ORDER_REQUEST,\n  CREATE_ORDER_FAILED,\n} from \"./constants\";\nimport { TOrderCreated } from \"../../types/data\";\nimport { TOrder } from \"./action-type\";\n\nexport type TInitialStateOrder = {\n  orderInfo: TOrderCreated | null;\n  orderRequest: boolean;\n  orderFailed: boolean;\n};\nconst initialState: TInitialStateOrder = {\n  orderInfo: null,\n  orderRequest: false,\n  orderFailed: false,\n};\n\nexport const orderReducer = (\n  state = initialState,\n  action: TOrder\n): TInitialStateOrder => {\n  switch (action.type) {\n    case CREATE_ORDER_SUCCESS: {\n      return {\n        ...state,\n        orderInfo: action.order,\n      };\n    }\n    case CREATE_ORDER_REQUEST: {\n      return {\n        ...state,\n        orderRequest: true,\n        orderFailed: false,\n      };\n    }\n    case CREATE_ORDER_FAILED: {\n      return {\n        ...state,\n        orderFailed: true,\n        orderRequest: false,\n      };\n    }\n    default: {\n      return state;\n    }\n  }\n};\n","import { TUser } from \"../../types/data\";\nimport { TAuth } from \"./action-type\";\nimport {\n  SET_USER_DATA,\n  SET_AUTH_CHECKING,\n  SET_REGISTER_SENDING,\n  SET_REGISTER_SEND_ERROR,\n  SET_LOGIN_SENDING,\n  SET_LOGIN_SEND_ERROR,\n  SET_PASSWORD_FORGOT_EMAIL_SEND,\n  SET_PASSWORD_FORGOT_CHANGED,\n  SET_RESET_PASSWORD_FORGOT_ERROR,\n  RESET_PASSWORD_FORGOT,\n} from \"./constants\";\n\nexport type TInitialStateAuth = {\n  data: TUser | null;\n  authChecking: boolean;\n  registerSending: boolean;\n  loginSending: boolean;\n  loginError: string;\n  registerError: string;\n  forgotPassword: {\n    emailSend: boolean;\n    passwordChanged: boolean;\n    message: string;\n    errorMessage: string;\n  };\n};\nconst initialState: TInitialStateAuth = {\n  data: null,\n  authChecking: true,\n  registerSending: false,\n  registerError: \"\",\n  loginSending: false,\n  loginError: \"\",\n  forgotPassword: {\n    emailSend: false,\n    passwordChanged: false,\n    message: \"\",\n    errorMessage: \"\",\n  },\n};\n\nexport const authReducer = (\n  state = initialState,\n  action: TAuth\n): TInitialStateAuth => {\n  switch (action.type) {\n    case SET_USER_DATA:\n      return { ...state, data: action.data };\n    case SET_AUTH_CHECKING:\n      return { ...state, authChecking: action.authChecking };\n    case SET_REGISTER_SENDING:\n      return { ...state, registerSending: action.registerSending };\n    case SET_REGISTER_SEND_ERROR:\n      return { ...state, registerError: action.registerError };\n    case SET_LOGIN_SENDING:\n      return { ...state, loginSending: action.loginSending };\n    case SET_LOGIN_SEND_ERROR:\n      return { ...state, loginError: action.loginError };\n    case SET_PASSWORD_FORGOT_EMAIL_SEND:\n      return {\n        ...state,\n        forgotPassword: {\n          ...state.forgotPassword,\n          emailSend: action.payload.emailSend,\n          passwordChanged: false,\n          message: action.payload.message,\n        },\n      };\n    case SET_PASSWORD_FORGOT_CHANGED:\n      return {\n        ...state,\n        forgotPassword: {\n          ...state.forgotPassword,\n          emailSend: false,\n          errorMessage: \"\",\n          passwordChanged: action.payload.passwordChanged,\n          message: action.payload.message,\n        },\n      };\n    case RESET_PASSWORD_FORGOT:\n      return {\n        ...state,\n        forgotPassword: {\n          message: \"\",\n          emailSend: false,\n          passwordChanged: false,\n          errorMessage: \"\",\n        },\n      };\n    case SET_RESET_PASSWORD_FORGOT_ERROR:\n      return {\n        ...state,\n        forgotPassword: {\n          ...state.forgotPassword,\n          errorMessage: action.payload.errorMessage,\n          passwordChanged: false,\n        },\n      };\n    default:\n      return state;\n  }\n};\n","import {\n  UPDATE_USER_DATA_ERROR,\n  UPDATE_USER_DATA_SEND,\n  UPDATE_USER_DATA,\n} from \"./constants\";\nimport { TUserUnion } from \"./actions-type\";\nimport { TUser } from \"../../types/data\";\n\nexport type TInitialStateUser = {\n  data: {\n    status: boolean;\n    user: TUser;\n  } | null;\n  userUpdateSending: boolean;\n  userUpdateError: boolean;\n};\nconst initialState: TInitialStateUser = {\n  data: null,\n  userUpdateSending: false,\n  userUpdateError: false,\n};\n\nexport const currentUserReducer = (\n  state = initialState,\n  action: TUserUnion\n): TInitialStateUser => {\n  switch (action.type) {\n    case UPDATE_USER_DATA_SEND:\n      return {\n        ...state,\n        data: { status: action.payload.success, user: action.payload.user },\n      };\n    case UPDATE_USER_DATA:\n      return {\n        ...state,\n        userUpdateSending: action.payload,\n        userUpdateError: false,\n      };\n    case UPDATE_USER_DATA_ERROR:\n      return {\n        ...state,\n        userUpdateError: action.payload,\n        userUpdateSending: false,\n      };\n\n    default:\n      return state;\n  }\n};\n","import { TOrderInfo } from \"../../types/data\";\nimport { TWs } from \"./action-type\";\nimport {\n  WS_CONNECTION_CLOSED,\n  WS_CONNECTION_ERROR,\n  WS_CONNECTION_START,\n  WS_CONNECTION_SUCCESS,\n  WS_GET_MESSAGE,\n} from \"./constants\";\nexport type TMessages = {\n  success: boolean;\n  orders: TOrderInfo[] | null;\n  total: number;\n  totalToday: number;\n} | null;\nexport type TInitialState = {\n  wsConnected: boolean;\n  wsError: boolean;\n  wsStart: boolean;\n  messages: TMessages;\n};\nconst initialState: TInitialState = {\n  wsConnected: false,\n  wsError: false,\n  wsStart: false,\n  messages: null,\n};\n\nexport const wsReducer = (state = initialState, action: TWs) => {\n  switch (action.type) {\n    case WS_CONNECTION_START:\n      return {\n        ...state,\n        wsError: false,\n        wsConnected: false,\n        wsStart: true,\n      };\n    case WS_CONNECTION_SUCCESS:\n      return {\n        ...state,\n        wsError: false,\n        wsConnected: true,\n        wsStart: false,\n      };\n\n    case WS_CONNECTION_ERROR:\n      return {\n        ...state,\n        wsError: action.wsError,\n        wsConnected: false,\n        wsStart: false,\n      };\n\n    case WS_CONNECTION_CLOSED:\n      return {\n        ...state,\n        wsError: false,\n        wsConnected: false,\n        wsStart: false,\n      };\n\n    case WS_GET_MESSAGE:\n      return {\n        ...state,\n        wsError: false,\n        messages: action.messages,\n      };\n\n    default:\n      return state;\n  }\n};\n","import { combineReducers } from \"redux\";\nimport { ingredientsReducer } from \"./ingredients/reducer\";\nimport { constructorReducer } from \"./constructor/reducer\";\nimport { orderReducer } from \"./order/reducer\";\nimport { authReducer } from \"./auth/reducer\";\nimport { currentUserReducer } from \"./user/reducer\";\nimport { wsReducer } from \"./websoket/reducer\";\n\nexport const rootReducer = combineReducers({\n  ingredients: ingredientsReducer,\n  constructorBurger: constructorReducer,\n  order: orderReducer,\n  auth: authReducer,\n  currentUser: currentUserReducer,\n  orders: wsReducer,\n});\n","import {\n  WS_CONNECTION_START,\n  WS_CONNECTION_SUCCESS,\n  WS_CONNECTION_ERROR,\n  WS_CONNECTION_CLOSED,\n  WS_GET_MESSAGE,\n} from \"./constants\";\nimport { TMessages } from \"./reducer\";\n\nexport interface IWsConnectionStart {\n  readonly type: typeof WS_CONNECTION_START;\n}\nexport interface IWsConnectionSuccess {\n  readonly type: typeof WS_CONNECTION_SUCCESS;\n}\nexport interface IWsConnectionError {\n  readonly type: typeof WS_CONNECTION_ERROR;\n  wsError: any;\n}\nexport interface IWsConnectionClosed {\n  readonly type: typeof WS_CONNECTION_CLOSED;\n}\nexport interface IWsConnectionMsg {\n  readonly type: typeof WS_GET_MESSAGE;\n  messages: TMessages;\n}\n\nexport type TWs =\n  | IWsConnectionStart\n  | IWsConnectionSuccess\n  | IWsConnectionError\n  | IWsConnectionClosed\n  | IWsConnectionMsg;\n\nexport const wsConnectionStart = (): IWsConnectionStart => ({\n  type: WS_CONNECTION_START,\n});\n\nexport const wsConnectionClosed = (): IWsConnectionClosed => ({\n  type: WS_CONNECTION_CLOSED,\n});\n\nexport const wsConnectionMsg = (messages: TMessages): IWsConnectionMsg => ({\n  type: WS_GET_MESSAGE,\n  messages,\n});\n\nexport const wsConnectionError = (wsError: any): IWsConnectionError => ({\n  type: WS_CONNECTION_ERROR,\n  wsError,\n});\n\nexport const TWsActions = {\n  wsInit: WS_CONNECTION_START,\n  onOpen: WS_CONNECTION_SUCCESS,\n  onClose: WS_CONNECTION_CLOSED,\n  onError: WS_CONNECTION_ERROR,\n  onMessage: WS_GET_MESSAGE,\n};\n","import { createStore, applyMiddleware, compose } from \"redux\";\nimport { rootReducer } from \"./rootReducer\";\nimport thunk from \"redux-thunk\";\nimport { WS_URL } from \"../utils/constants\";\nimport { TWsActions } from \"./websoket/action-type\";\nimport { socketMiddleware } from \"./websoket/socketMiddleware\";\n\nconst composeEnhancers =\n  (window && (window as any).__REDUX_DEVTOOLS_EXTENSION_COMPOSE__) || compose;\n\nconst enhancer = composeEnhancers(\n  applyMiddleware(thunk, socketMiddleware(WS_URL, TWsActions))\n);\nexport default createStore(rootReducer, enhancer);\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./components/app/app\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nimport { DndProvider } from \"react-dnd\";\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\n\nimport { Provider } from \"react-redux\";\nimport store from \"./services/store\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\n\nReactDOM.render(\n  <Provider store={store}>\n    <DndProvider backend={HTML5Backend}>\n      <Router basename={process.env.PUBLIC_URL}>\n        <App />\n      </Router>\n    </DndProvider>\n  </Provider>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profileSidebar\":\"profile-sidebar_profileSidebar__iTg6Y\",\"sidebar\":\"profile-sidebar_sidebar__2fq8a\",\"sidebarItem\":\"profile-sidebar_sidebarItem__3UoVP\",\"sidebarLink\":\"profile-sidebar_sidebarLink__3NPGN\",\"sidebarLinkCurrent\":\"profile-sidebar_sidebarLinkCurrent__pO4Tj\",\"sidebarSubText\":\"profile-sidebar_sidebarSubText__geBIZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"app-header_header__1iHLW\",\"headerContainer\":\"app-header_headerContainer__VMOMp\",\"headerLink\":\"app-header_headerLink__2_tEp pt-4 pb-4 pr-5 pl-5\",\"active\":\"app-header_active__1gFZ7\",\"headerMenu\":\"app-header_headerMenu__1xUc6\",\"logoWrap\":\"app-header_logoWrap__1RQWY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"orderList\":\"order-list_orderList__3_rOg\",\"orderItem\":\"order-list_orderItem__2AitQ\",\"orderItemHeader\":\"order-list_orderItemHeader__3NRIc\",\"orderStatus\":\"order-list_orderStatus__5gkU2\",\"ready\":\"order-list_ready__12CYk\",\"orderItemInfo\":\"order-list_orderItemInfo__Q9wAm\",\"orderItemPrice\":\"order-list_orderItemPrice__1KIqM\",\"orderItemPriceNum\":\"order-list_orderItemPriceNum__2UhJK\",\"ingredientsList\":\"order-list_ingredientsList__3fofT\",\"ingredientsListItem\":\"order-list_ingredientsListItem__1P9Wf\",\"ingredientsListItemCount\":\"order-list_ingredientsListItemCount__1a_jH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal\":\"modal_modal__1DF1f\",\"show\":\"modal_show__3wXPW\",\"modalBody\":\"modal_modalBody__3JgG-\",\"modalOverlay\":\"modal_modalOverlay__q9UDN\",\"modalHeader\":\"modal_modalHeader__Ukaot\",\"modalCloseBtn\":\"modal_modalCloseBtn__3H0Tv\",\"modalContent\":\"modal_modalContent__10T8x\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"ingredient-details_container__1-8YX\",\"ImgWrap\":\"ingredient-details_ImgWrap__3wq98\",\"statList\":\"ingredient-details_statList__3wS_T\",\"statItem\":\"ingredient-details_statItem__3cQVy\",\"statName\":\"ingredient-details_statName__lTF04\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrap\":\"page_wrap__2DiP5\",\"form\":\"page_form__v-LlZ\",\"formTitle\":\"page_formTitle__3on0E\",\"formField\":\"page_formField__1s_3n\",\"formFieldNewPassword\":\"page_formFieldNewPassword__s28_n\",\"formButtonsContainer\":\"page_formButtonsContainer__2fuEs\",\"formButton\":\"page_formButton__3mhQI\",\"formResetBtn\":\"page_formResetBtn__2ah-a\",\"formLinkItem\":\"page_formLinkItem__h1rnM\",\"formLink\":\"page_formLink__2KGAj\",\"formErrorMsg\":\"page_formErrorMsg__2jJZb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profileContainer\":\"profile_profileContainer__D7wdx\",\"profileOrders\":\"profile_profileOrders__14jrN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"app_container__2GidD\",\"flex\":\"app_flex__3MfJM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"preloader\":\"preloader_preloader__16lUt\",\"pulse\":\"preloader_pulse__2LpeO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"order\":\"order_order__3SHPF\"};"],"sourceRoot":""}